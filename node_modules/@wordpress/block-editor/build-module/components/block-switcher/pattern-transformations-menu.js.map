{"version":3,"sources":["@wordpress/block-editor/src/components/block-switcher/pattern-transformations-menu.js"],"names":["__","useState","useInstanceId","chevronRight","MenuGroup","MenuItem","Popover","VisuallyHidden","__unstableComposite","Composite","__unstableUseCompositeState","useCompositeState","__unstableCompositeItem","CompositeItem","BlockPreview","useTransformedPatterns","PatternTransformationsMenu","blocks","patterns","statePatterns","onSelect","showTransforms","setShowTransforms","length","event","preventDefault","PreviewPatternsPopover","BlockPatternsList","composite","map","pattern","name","BlockPattern","baseClassName","descriptionId","title","description","undefined","transformedBlocks","viewportWidth"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport { useInstanceId } from '@wordpress/compose';\nimport { chevronRight } from '@wordpress/icons';\n\nimport {\n\tMenuGroup,\n\tMenuItem,\n\tPopover,\n\tVisuallyHidden,\n\t__unstableComposite as Composite,\n\t__unstableUseCompositeState as useCompositeState,\n\t__unstableCompositeItem as CompositeItem,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockPreview from '../block-preview';\nimport useTransformedPatterns from './use-transformed-patterns';\n\nfunction PatternTransformationsMenu( {\n\tblocks,\n\tpatterns: statePatterns,\n\tonSelect,\n} ) {\n\tconst [ showTransforms, setShowTransforms ] = useState( false );\n\tconst patterns = useTransformedPatterns( statePatterns, blocks );\n\tif ( ! patterns.length ) return null;\n\n\treturn (\n\t\t<MenuGroup className=\"block-editor-block-switcher__pattern__transforms__menugroup\">\n\t\t\t{ showTransforms && (\n\t\t\t\t<PreviewPatternsPopover\n\t\t\t\t\tpatterns={ patterns }\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t<MenuItem\n\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tsetShowTransforms( ! showTransforms );\n\t\t\t\t} }\n\t\t\t\ticon={ chevronRight }\n\t\t\t>\n\t\t\t\t{ __( 'Patterns' ) }\n\t\t\t</MenuItem>\n\t\t</MenuGroup>\n\t);\n}\n\nfunction PreviewPatternsPopover( { patterns, onSelect } ) {\n\treturn (\n\t\t<div className=\"block-editor-block-switcher__popover__preview__parent\">\n\t\t\t<div className=\"block-editor-block-switcher__popover__preview__container\">\n\t\t\t\t<Popover\n\t\t\t\t\tclassName=\"block-editor-block-switcher__preview__popover\"\n\t\t\t\t\tposition=\"bottom right\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"block-editor-block-switcher__preview\">\n\t\t\t\t\t\t<div className=\"block-editor-block-switcher__preview-title\">\n\t\t\t\t\t\t\t{ __( 'Preview' ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<BlockPatternsList\n\t\t\t\t\t\t\tpatterns={ patterns }\n\t\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Popover>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction BlockPatternsList( { patterns, onSelect } ) {\n\tconst composite = useCompositeState();\n\treturn (\n\t\t<Composite\n\t\t\t{ ...composite }\n\t\t\trole=\"listbox\"\n\t\t\tclassName=\"block-editor-block-switcher__preview-patterns-container\"\n\t\t\taria-label={ __( 'Patterns list' ) }\n\t\t>\n\t\t\t{ patterns.map( ( pattern ) => (\n\t\t\t\t<BlockPattern\n\t\t\t\t\tkey={ pattern.name }\n\t\t\t\t\tpattern={ pattern }\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\tcomposite={ composite }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</Composite>\n\t);\n}\n\nfunction BlockPattern( { pattern, onSelect, composite } ) {\n\t// TODO check pattern/preview width...\n\tconst baseClassName =\n\t\t'block-editor-block-switcher__preview-patterns-container';\n\tconst descriptionId = useInstanceId(\n\t\tBlockPattern,\n\t\t`${ baseClassName }-list__item-description`\n\t);\n\treturn (\n\t\t<div\n\t\t\tclassName={ `${ baseClassName }-list__list-item` }\n\t\t\taria-label={ pattern.title }\n\t\t\taria-describedby={ pattern.description ? descriptionId : undefined }\n\t\t>\n\t\t\t<CompositeItem\n\t\t\t\trole=\"option\"\n\t\t\t\tas=\"div\"\n\t\t\t\t{ ...composite }\n\t\t\t\tclassName={ `${ baseClassName }-list__item` }\n\t\t\t\tonClick={ () => onSelect( pattern.transformedBlocks ) }\n\t\t\t>\n\t\t\t\t<BlockPreview\n\t\t\t\t\tblocks={ pattern.transformedBlocks }\n\t\t\t\t\tviewportWidth={ pattern.viewportWidth || 500 }\n\t\t\t\t/>\n\t\t\t\t<div className={ `${ baseClassName }-list__item-title` }>\n\t\t\t\t\t{ pattern.title }\n\t\t\t\t</div>\n\t\t\t</CompositeItem>\n\t\t\t{ !! pattern.description && (\n\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t{ pattern.description }\n\t\t\t\t</VisuallyHidden>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default PatternTransformationsMenu;\n"]}