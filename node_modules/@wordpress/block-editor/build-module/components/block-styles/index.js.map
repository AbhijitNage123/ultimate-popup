{"version":3,"sources":["@wordpress/block-editor/src/components/block-styles/index.js"],"names":["find","noop","classnames","useMemo","useSelect","useDispatch","ENTER","SPACE","_x","getBlockType","cloneBlock","getBlockFromExample","store","blocksStore","getActiveStyle","replaceActiveStyle","BlockPreview","blockEditorStore","EMPTY_OBJECT","useGenericPreviewBlock","block","type","example","blockName","name","attributes","innerBlocks","BlockStyles","clientId","onSwitch","onHoverClassName","itemRole","selector","select","getBlock","blockType","getBlockStyles","styles","className","updateBlockAttributes","genericPreviewBlock","length","renderedStyles","label","isDefault","activeStyle","map","style","styleClassName","BlockStyleItem","isActive","onBlur","onHover","onSelect","previewBlocks","event","keyCode","preventDefault"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { find, noop } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { ENTER, SPACE } from '@wordpress/keycodes';\nimport { _x } from '@wordpress/i18n';\nimport {\n\tgetBlockType,\n\tcloneBlock,\n\tgetBlockFromExample,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { getActiveStyle, replaceActiveStyle } from './utils';\nimport BlockPreview from '../block-preview';\nimport { store as blockEditorStore } from '../../store';\n\nconst EMPTY_OBJECT = {};\n\nfunction useGenericPreviewBlock( block, type ) {\n\treturn useMemo( () => {\n\t\tconst example = type?.example;\n\t\tconst blockName = type?.name;\n\n\t\tif ( example && blockName ) {\n\t\t\treturn getBlockFromExample( blockName, {\n\t\t\t\tattributes: example.attributes,\n\t\t\t\tinnerBlocks: example.innerBlocks,\n\t\t\t} );\n\t\t}\n\n\t\tif ( block ) {\n\t\t\treturn cloneBlock( block );\n\t\t}\n\t}, [ type?.example ? block?.name : block, type ] );\n}\n\nfunction BlockStyles( {\n\tclientId,\n\tonSwitch = noop,\n\tonHoverClassName = noop,\n\titemRole,\n} ) {\n\tconst selector = ( select ) => {\n\t\tconst { getBlock } = select( blockEditorStore );\n\t\tconst block = getBlock( clientId );\n\n\t\tif ( ! block ) {\n\t\t\treturn EMPTY_OBJECT;\n\t\t}\n\n\t\tconst blockType = getBlockType( block.name );\n\t\tconst { getBlockStyles } = select( blocksStore );\n\t\treturn {\n\t\t\tblock,\n\t\t\ttype: blockType,\n\t\t\tstyles: getBlockStyles( block.name ),\n\t\t\tclassName: block.attributes.className || '',\n\t\t};\n\t};\n\n\tconst { styles, block, type, className } = useSelect( selector, [\n\t\tclientId,\n\t] );\n\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst genericPreviewBlock = useGenericPreviewBlock( block, type );\n\n\tif ( ! styles || styles.length === 0 ) {\n\t\treturn null;\n\t}\n\n\tconst renderedStyles = find( styles, 'isDefault' )\n\t\t? styles\n\t\t: [\n\t\t\t\t{\n\t\t\t\t\tname: 'default',\n\t\t\t\t\tlabel: _x( 'Default', 'block style' ),\n\t\t\t\t\tisDefault: true,\n\t\t\t\t},\n\t\t\t\t...styles,\n\t\t  ];\n\n\tconst activeStyle = getActiveStyle( renderedStyles, className );\n\treturn (\n\t\t<div className=\"block-editor-block-styles\">\n\t\t\t{ renderedStyles.map( ( style ) => {\n\t\t\t\tconst styleClassName = replaceActiveStyle(\n\t\t\t\t\tclassName,\n\t\t\t\t\tactiveStyle,\n\t\t\t\t\tstyle\n\t\t\t\t);\n\t\t\t\treturn (\n\t\t\t\t\t<BlockStyleItem\n\t\t\t\t\t\tgenericPreviewBlock={ genericPreviewBlock }\n\t\t\t\t\t\tclassName={ className }\n\t\t\t\t\t\tisActive={ activeStyle === style }\n\t\t\t\t\t\tkey={ style.name }\n\t\t\t\t\t\tonSelect={ () => {\n\t\t\t\t\t\t\tupdateBlockAttributes( clientId, {\n\t\t\t\t\t\t\t\tclassName: styleClassName,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tonHoverClassName( null );\n\t\t\t\t\t\t\tonSwitch();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonBlur={ () => onHoverClassName( null ) }\n\t\t\t\t\t\tonHover={ () => onHoverClassName( styleClassName ) }\n\t\t\t\t\t\tstyle={ style }\n\t\t\t\t\t\tstyleClassName={ styleClassName }\n\t\t\t\t\t\titemRole={ itemRole }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</div>\n\t);\n}\n\nfunction BlockStyleItem( {\n\tgenericPreviewBlock,\n\tstyle,\n\tisActive,\n\tonBlur,\n\tonHover,\n\tonSelect,\n\tstyleClassName,\n\titemRole,\n} ) {\n\tconst previewBlocks = useMemo( () => {\n\t\treturn {\n\t\t\t...genericPreviewBlock,\n\t\t\tattributes: {\n\t\t\t\t...genericPreviewBlock.attributes,\n\t\t\t\tclassName: styleClassName,\n\t\t\t},\n\t\t};\n\t}, [ genericPreviewBlock, styleClassName ] );\n\n\treturn (\n\t\t<div\n\t\t\tkey={ style.name }\n\t\t\tclassName={ classnames( 'block-editor-block-styles__item', {\n\t\t\t\t'is-active': isActive,\n\t\t\t} ) }\n\t\t\tonClick={ () => onSelect() }\n\t\t\tonKeyDown={ ( event ) => {\n\t\t\t\tif ( ENTER === event.keyCode || SPACE === event.keyCode ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tonSelect();\n\t\t\t\t}\n\t\t\t} }\n\t\t\tonMouseEnter={ onHover }\n\t\t\tonMouseLeave={ onBlur }\n\t\t\trole={ itemRole || 'button' }\n\t\t\ttabIndex=\"0\"\n\t\t\taria-label={ style.label || style.name }\n\t\t>\n\t\t\t<div className=\"block-editor-block-styles__item-preview\">\n\t\t\t\t<BlockPreview viewportWidth={ 500 } blocks={ previewBlocks } />\n\t\t\t</div>\n\t\t\t<div className=\"block-editor-block-styles__item-label\">\n\t\t\t\t{ style.label || style.name }\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default BlockStyles;\n"]}