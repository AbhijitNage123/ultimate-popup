{"version":3,"sources":["@wordpress/block-editor/src/components/list-view/block-slot.js"],"names":["classnames","getBlockType","Fill","Slot","VisuallyHidden","useInstanceId","useSelect","Children","cloneElement","forwardRef","useContext","__","BlockIcon","BlockListBlockContext","ListViewBlockSelectButton","getBlockPositionDescription","store","blockEditorStore","ListViewExpander","getSlotName","clientId","ListViewBlockSlot","props","ref","block","name","select","getBlockName","instanceId","fills","length","className","isSelected","position","siblingBlockCount","level","tabIndex","onFocus","onToggleExpanded","blockType","descriptionId","blockPositionDescription","forwardedFillProps","icon","map","fill","ListViewBlockFill"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { getBlockType } from '@wordpress/blocks';\nimport { Fill, Slot, VisuallyHidden } from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tChildren,\n\tcloneElement,\n\tforwardRef,\n\tuseContext,\n} from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport { BlockListBlockContext } from '../block-list/block';\nimport ListViewBlockSelectButton from './block-select-button';\nimport { getBlockPositionDescription } from './utils';\nimport { store as blockEditorStore } from '../../store';\nimport ListViewExpander from './expander';\n\nconst getSlotName = ( clientId ) => `ListViewBlock-${ clientId }`;\n\nfunction ListViewBlockSlot( props, ref ) {\n\tconst { clientId } = props.block;\n\tconst { name } = useSelect(\n\t\t( select ) => select( blockEditorStore ).getBlockName( clientId ),\n\t\t[ clientId ]\n\t);\n\tconst instanceId = useInstanceId( ListViewBlockSlot );\n\n\treturn (\n\t\t<Slot name={ getSlotName( clientId ) }>\n\t\t\t{ ( fills ) => {\n\t\t\t\tif ( ! fills.length ) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ListViewBlockSelectButton ref={ ref } { ...props } />\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst {\n\t\t\t\t\tclassName,\n\t\t\t\t\tisSelected,\n\t\t\t\t\tposition,\n\t\t\t\t\tsiblingBlockCount,\n\t\t\t\t\tlevel,\n\t\t\t\t\ttabIndex,\n\t\t\t\t\tonFocus,\n\t\t\t\t\tonToggleExpanded,\n\t\t\t\t} = props;\n\n\t\t\t\tconst blockType = getBlockType( name );\n\t\t\t\tconst descriptionId = `list-view-block-slot__${ instanceId }`;\n\t\t\t\tconst blockPositionDescription = getBlockPositionDescription(\n\t\t\t\t\tposition,\n\t\t\t\t\tsiblingBlockCount,\n\t\t\t\t\tlevel\n\t\t\t\t);\n\n\t\t\t\tconst forwardedFillProps = {\n\t\t\t\t\t// Ensure that the component in the slot can receive\n\t\t\t\t\t// keyboard navigation.\n\t\t\t\t\ttabIndex,\n\t\t\t\t\tonFocus,\n\t\t\t\t\tref,\n\t\t\t\t\t// Give the element rendered in the slot a description\n\t\t\t\t\t// that describes its position.\n\t\t\t\t\t'aria-describedby': descriptionId,\n\t\t\t\t};\n\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t'block-editor-list-view-block-slot',\n\t\t\t\t\t\t\t\tclassName\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ListViewExpander onClick={ onToggleExpanded } />\n\t\t\t\t\t\t\t<BlockIcon icon={ blockType.icon } showColors />\n\t\t\t\t\t\t\t{ Children.map( fills, ( fill ) =>\n\t\t\t\t\t\t\t\tcloneElement( fill, {\n\t\t\t\t\t\t\t\t\t...fill.props,\n\t\t\t\t\t\t\t\t\t...forwardedFillProps,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ isSelected && (\n\t\t\t\t\t\t\t\t<VisuallyHidden>\n\t\t\t\t\t\t\t\t\t{ __( '(selected block)' ) }\n\t\t\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"block-editor-list-view-block-slot__description\"\n\t\t\t\t\t\t\t\tid={ descriptionId }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ blockPositionDescription }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t} }\n\t\t</Slot>\n\t);\n}\n\nexport default forwardRef( ListViewBlockSlot );\n\nexport const ListViewBlockFill = ( props ) => {\n\tconst { clientId } = useContext( BlockListBlockContext );\n\treturn <Fill { ...props } name={ getSlotName( clientId ) } />;\n};\n"]}