{"version":3,"sources":["@wordpress/block-editor/src/utils/pre-parse-patterns.js"],"names":["requestIdleCallback","window","callback","setTimeout","Date","now","requestAnimationFrame","cancelIdleCallback","clearTimeout","cancelAnimationFrame","usePreParsePatterns","patterns","_select","blockEditorStore","getSettings","__experimentalBlockPatterns","length","handle","index","__experimentalGetParsedPattern","name"],"mappings":";;;;;;;AAGA;;AACA;;AAKA;;AATA;AACA;AACA;;AAIA;AACA;AACA;AAGA,MAAMA,mBAAmB,GAAG,CAAE,MAAM;AACnC,MAAK,OAAOC,MAAP,KAAkB,WAAvB,EAAqC;AACpC,WAASC,QAAF,IAAgB;AACtBC,MAAAA,UAAU,CAAE,MAAMD,QAAQ,CAAEE,IAAI,CAACC,GAAL,EAAF,CAAhB,EAAgC,CAAhC,CAAV;AACA,KAFD;AAGA;;AAED,SAAOJ,MAAM,CAACD,mBAAP,IAA8BC,MAAM,CAACK,qBAA5C;AACA,CAR2B,GAA5B;;AAUA,MAAMC,kBAAkB,GAAG,CAAE,MAAM;AAClC,MAAK,OAAON,MAAP,KAAkB,WAAvB,EAAqC;AACpC,WAAOO,YAAP;AACA;;AAED,SAAOP,MAAM,CAACM,kBAAP,IAA6BN,MAAM,CAACQ,oBAA3C;AACA,CAN0B,GAA3B;;AAQO,SAASC,mBAAT,GAA+B;AACrC,QAAMC,QAAQ,GAAG,qBACdC,OAAF,IACCA,OAAO,CAAEC,YAAF,CAAP,CAA4BC,WAA5B,GACEC,2BAHa,EAIhB,EAJgB,CAAjB;AAOA,0BAAW,MAAM;AAChB,QAAK,EAAEJ,QAAF,aAAEA,QAAF,eAAEA,QAAQ,CAAEK,MAAZ,CAAL,EAA0B;AACzB;AACA;;AAED,QAAIC,MAAJ;AACA,QAAIC,KAAK,GAAG,CAAC,CAAb;;AAEA,UAAMhB,QAAQ,GAAG,MAAM;AACtBgB,MAAAA,KAAK;;AACL,UAAKA,KAAK,IAAIP,QAAQ,CAACK,MAAvB,EAAgC;AAC/B;AACA;;AAED,wBAAQH,YAAR,EAA2BM,8BAA3B,CACCR,QAAQ,CAAEO,KAAF,CAAR,CAAkBE,IADnB;;AAIAH,MAAAA,MAAM,GAAGjB,mBAAmB,CAAEE,QAAF,CAA5B;AACA,KAXD;;AAaAe,IAAAA,MAAM,GAAGjB,mBAAmB,CAAEE,QAAF,CAA5B;AACA,WAAO,MAAMK,kBAAkB,CAAEU,MAAF,CAA/B;AACA,GAvBD,EAuBG,CAAEN,QAAF,CAvBH;AAyBA,SAAO,IAAP;AACA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect, select } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\n\nconst requestIdleCallback = ( () => {\n\tif ( typeof window === 'undefined' ) {\n\t\treturn ( callback ) => {\n\t\t\tsetTimeout( () => callback( Date.now() ), 0 );\n\t\t};\n\t}\n\n\treturn window.requestIdleCallback || window.requestAnimationFrame;\n} )();\n\nconst cancelIdleCallback = ( () => {\n\tif ( typeof window === 'undefined' ) {\n\t\treturn clearTimeout;\n\t}\n\n\treturn window.cancelIdleCallback || window.cancelAnimationFrame;\n} )();\n\nexport function usePreParsePatterns() {\n\tconst patterns = useSelect(\n\t\t( _select ) =>\n\t\t\t_select( blockEditorStore ).getSettings()\n\t\t\t\t.__experimentalBlockPatterns,\n\t\t[]\n\t);\n\n\tuseEffect( () => {\n\t\tif ( ! patterns?.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet handle;\n\t\tlet index = -1;\n\n\t\tconst callback = () => {\n\t\t\tindex++;\n\t\t\tif ( index >= patterns.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tselect( blockEditorStore ).__experimentalGetParsedPattern(\n\t\t\t\tpatterns[ index ].name\n\t\t\t);\n\n\t\t\thandle = requestIdleCallback( callback );\n\t\t};\n\n\t\thandle = requestIdleCallback( callback );\n\t\treturn () => cancelIdleCallback( handle );\n\t}, [ patterns ] );\n\n\treturn null;\n}\n"]}