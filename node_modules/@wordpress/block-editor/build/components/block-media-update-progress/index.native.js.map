{"version":3,"sources":["@wordpress/block-editor/src/components/block-media-update-progress/index.native.js"],"names":["MEDIA_UPLOAD_STATE_UPLOADING","MEDIA_UPLOAD_STATE_SUCCEEDED","MEDIA_UPLOAD_STATE_FAILED","MEDIA_UPLOAD_STATE_RESET","MEDIA_SAVE_STATE_SAVING","MEDIA_SAVE_STATE_SUCCEEDED","MEDIA_SAVE_STATE_FAILED","MEDIA_SAVE_STATE_RESET","MEDIA_SAVE_FINAL_STATE_RESULT","MEDIA_SAVE_MEDIAID_CHANGED","BlockMediaUpdateProgress","Component","constructor","props","state","progress","isSaveInProgress","isSaveFailed","isUploadInProgress","isUploadFailed","mediaUpload","bind","mediaSave","componentDidMount","addMediaUploadListener","addMediaSaveListener","componentWillUnmount","removeMediaUploadListener","removeMediaSaveListener","mediaIdContainedInMediaFiles","mediaId","mediaFiles","undefined","some","element","id","toString","payload","updateMediaUploadProgress","finishMediaUploadWithSuccess","finishMediaUploadWithFailure","mediaUploadStateReset","updateMediaSaveProgress","finishMediaSaveWithSuccess","finishMediaSaveWithFailure","mediaSaveStateReset","finalSaveResult","mediaIdChanged","setState","onUpdateMediaSaveProgress","onFinishMediaSaveWithSuccess","onFinishMediaSaveWithFailure","onMediaSaveStateReset","success","onFinalSaveResult","onMediaIdChanged","onUpdateMediaUploadProgress","onFinishMediaUploadWithSuccess","onFinishMediaUploadWithFailure","onMediaUploadStateReset","subscriptionParentMediaUpload","remove","subscriptionParentMediaSave","render","renderContent","showSpinner","retryMessageSave","retryMessageUpload","retryMessage","styles","mediaUploadProgress","progressBar"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { Spinner } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tsubscribeMediaUpload,\n\tsubscribeMediaSave,\n} from '@wordpress/react-native-bridge';\n\n/**\n * Internal dependencies\n */\nimport styles from './styles.scss';\n\nexport const MEDIA_UPLOAD_STATE_UPLOADING = 1;\nexport const MEDIA_UPLOAD_STATE_SUCCEEDED = 2;\nexport const MEDIA_UPLOAD_STATE_FAILED = 3;\nexport const MEDIA_UPLOAD_STATE_RESET = 4;\n\nexport const MEDIA_SAVE_STATE_SAVING = 5;\nexport const MEDIA_SAVE_STATE_SUCCEEDED = 6;\nexport const MEDIA_SAVE_STATE_FAILED = 7;\nexport const MEDIA_SAVE_STATE_RESET = 8;\nexport const MEDIA_SAVE_FINAL_STATE_RESULT = 9;\nexport const MEDIA_SAVE_MEDIAID_CHANGED = 10;\n\nexport class BlockMediaUpdateProgress extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tprogress: 0,\n\t\t\tisSaveInProgress: false,\n\t\t\tisSaveFailed: false,\n\t\t\tisUploadInProgress: false,\n\t\t\tisUploadFailed: false,\n\t\t};\n\n\t\tthis.mediaUpload = this.mediaUpload.bind( this );\n\t\tthis.mediaSave = this.mediaSave.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.addMediaUploadListener();\n\t\tthis.addMediaSaveListener();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.removeMediaUploadListener();\n\t\tthis.removeMediaSaveListener();\n\t}\n\n\tmediaIdContainedInMediaFiles( mediaId, mediaFiles ) {\n\t\tif ( mediaId !== undefined && mediaFiles !== undefined ) {\n\t\t\treturn mediaFiles.some(\n\t\t\t\t( element ) => element.id === mediaId.toString()\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\n\tmediaUpload( payload ) {\n\t\tconst { mediaFiles } = this.props;\n\n\t\tif (\n\t\t\tthis.mediaIdContainedInMediaFiles( payload.mediaId, mediaFiles ) ===\n\t\t\tfalse\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch ( payload.state ) {\n\t\t\tcase MEDIA_UPLOAD_STATE_UPLOADING:\n\t\t\t\tthis.updateMediaUploadProgress( payload );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_UPLOAD_STATE_SUCCEEDED:\n\t\t\t\tthis.finishMediaUploadWithSuccess( payload );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_UPLOAD_STATE_FAILED:\n\t\t\t\tthis.finishMediaUploadWithFailure( payload );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_UPLOAD_STATE_RESET:\n\t\t\t\tthis.mediaUploadStateReset( payload );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tmediaSave( payload ) {\n\t\tconst { mediaFiles } = this.props;\n\n\t\tif (\n\t\t\tthis.mediaIdContainedInMediaFiles( payload.mediaId, mediaFiles ) ===\n\t\t\tfalse\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch ( payload.state ) {\n\t\t\tcase MEDIA_SAVE_STATE_SAVING:\n\t\t\t\tthis.updateMediaSaveProgress( payload );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_SAVE_STATE_SUCCEEDED:\n\t\t\t\tthis.finishMediaSaveWithSuccess( payload );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_SAVE_STATE_FAILED:\n\t\t\t\tthis.finishMediaSaveWithFailure( payload );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_SAVE_STATE_RESET:\n\t\t\t\tthis.mediaSaveStateReset( payload );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_SAVE_FINAL_STATE_RESULT:\n\t\t\t\tthis.finalSaveResult( payload );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_SAVE_MEDIAID_CHANGED:\n\t\t\t\tthis.mediaIdChanged( payload );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// ---- Block media save actions\n\tupdateMediaSaveProgress( payload ) {\n\t\tthis.setState( {\n\t\t\tprogress: payload.progress,\n\t\t\tisUploadInProgress: false,\n\t\t\tisUploadFailed: false,\n\t\t\tisSaveInProgress: true,\n\t\t\tisSaveFailed: false,\n\t\t} );\n\t\tif ( this.props.onUpdateMediaSaveProgress ) {\n\t\t\tthis.props.onUpdateMediaSaveProgress( payload );\n\t\t}\n\t}\n\n\tfinishMediaSaveWithSuccess( payload ) {\n\t\tthis.setState( { isSaveInProgress: false } );\n\t\tif ( this.props.onFinishMediaSaveWithSuccess ) {\n\t\t\tthis.props.onFinishMediaSaveWithSuccess( payload );\n\t\t}\n\t}\n\n\tfinishMediaSaveWithFailure( payload ) {\n\t\tthis.setState( { isSaveInProgress: false, isSaveFailed: true } );\n\t\tif ( this.props.onFinishMediaSaveWithFailure ) {\n\t\t\tthis.props.onFinishMediaSaveWithFailure( payload );\n\t\t}\n\t}\n\n\tmediaSaveStateReset( payload ) {\n\t\tthis.setState( { isSaveInProgress: false, isSaveFailed: false } );\n\t\tif ( this.props.onMediaSaveStateReset ) {\n\t\t\tthis.props.onMediaSaveStateReset( payload );\n\t\t}\n\t}\n\n\tfinalSaveResult( payload ) {\n\t\tthis.setState( {\n\t\t\tprogress: payload.progress,\n\t\t\tisUploadInProgress: false,\n\t\t\tisUploadFailed: false,\n\t\t\tisSaveInProgress: false,\n\t\t\tisSaveFailed: ! payload.success,\n\t\t} );\n\t\tif ( this.props.onFinalSaveResult ) {\n\t\t\tthis.props.onFinalSaveResult( payload );\n\t\t}\n\t}\n\n\tmediaIdChanged( payload ) {\n\t\tthis.setState( {\n\t\t\tisUploadInProgress: false,\n\t\t\tisUploadFailed: false,\n\t\t\tisSaveInProgress: false,\n\t\t\tisSaveFailed: false,\n\t\t} );\n\t\tif ( this.props.onMediaIdChanged ) {\n\t\t\tthis.props.onMediaIdChanged( payload );\n\t\t}\n\t}\n\n\t// ---- Block media upload actions\n\tupdateMediaUploadProgress( payload ) {\n\t\tthis.setState( {\n\t\t\tprogress: payload.progress,\n\t\t\tisUploadInProgress: true,\n\t\t\tisUploadFailed: false,\n\t\t\tisSaveInProgress: false,\n\t\t\tisSaveFailed: false,\n\t\t} );\n\t\tif ( this.props.onUpdateMediaUploadProgress ) {\n\t\t\tthis.props.onUpdateMediaUploadProgress( payload );\n\t\t}\n\t}\n\n\tfinishMediaUploadWithSuccess( payload ) {\n\t\tthis.setState( { isUploadInProgress: false, isSaveInProgress: false } );\n\t\tif ( this.props.onFinishMediaUploadWithSuccess ) {\n\t\t\tthis.props.onFinishMediaUploadWithSuccess( payload );\n\t\t}\n\t}\n\n\tfinishMediaUploadWithFailure( payload ) {\n\t\tthis.setState( { isUploadInProgress: false, isUploadFailed: true } );\n\t\tif ( this.props.onFinishMediaUploadWithFailure ) {\n\t\t\tthis.props.onFinishMediaUploadWithFailure( payload );\n\t\t}\n\t}\n\n\tmediaUploadStateReset( payload ) {\n\t\tthis.setState( { isUploadInProgress: false, isUploadFailed: false } );\n\t\tif ( this.props.onMediaUploadStateReset ) {\n\t\t\tthis.props.onMediaUploadStateReset( payload );\n\t\t}\n\t}\n\n\taddMediaUploadListener() {\n\t\t//if we already have a subscription not worth doing it again\n\t\tif ( this.subscriptionParentMediaUpload ) {\n\t\t\treturn;\n\t\t}\n\t\tthis.subscriptionParentMediaUpload = subscribeMediaUpload(\n\t\t\t( payload ) => {\n\t\t\t\tthis.mediaUpload( payload );\n\t\t\t}\n\t\t);\n\t}\n\n\tremoveMediaUploadListener() {\n\t\tif ( this.subscriptionParentMediaUpload ) {\n\t\t\tthis.subscriptionParentMediaUpload.remove();\n\t\t}\n\t}\n\n\taddMediaSaveListener() {\n\t\t//if we already have a subscription not worth doing it again\n\t\tif ( this.subscriptionParentMediaSave ) {\n\t\t\treturn;\n\t\t}\n\t\tthis.subscriptionParentMediaSave = subscribeMediaSave( ( payload ) => {\n\t\t\tthis.mediaSave( payload );\n\t\t} );\n\t}\n\n\tremoveMediaSaveListener() {\n\t\tif ( this.subscriptionParentMediaSave ) {\n\t\t\tthis.subscriptionParentMediaSave.remove();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { renderContent = () => null } = this.props;\n\t\tconst {\n\t\t\tisUploadInProgress,\n\t\t\tisUploadFailed,\n\t\t\tisSaveInProgress,\n\t\t\tisSaveFailed,\n\t\t} = this.state;\n\t\tconst showSpinner =\n\t\t\tthis.state.isUploadInProgress || this.state.isSaveInProgress;\n\t\tconst progress = this.state.progress * 100;\n\t\t// eslint-disable-next-line @wordpress/i18n-no-collapsible-whitespace\n\t\tconst retryMessageSave = __(\n\t\t\t'Failed to save files.\\nPlease tap for options.'\n\t\t);\n\t\t// eslint-disable-next-line @wordpress/i18n-no-collapsible-whitespace\n\t\tconst retryMessageUpload = __(\n\t\t\t'Failed to upload files.\\nPlease tap for options.'\n\t\t);\n\t\tlet retryMessage = retryMessageSave;\n\t\tif ( isUploadFailed ) {\n\t\t\tretryMessage = retryMessageUpload;\n\t\t}\n\n\t\treturn (\n\t\t\t<View style={ styles.mediaUploadProgress } pointerEvents=\"box-none\">\n\t\t\t\t{ showSpinner && (\n\t\t\t\t\t<View style={ styles.progressBar }>\n\t\t\t\t\t\t<Spinner progress={ progress } />\n\t\t\t\t\t</View>\n\t\t\t\t) }\n\t\t\t\t{ renderContent( {\n\t\t\t\t\tisUploadInProgress,\n\t\t\t\t\tisUploadFailed,\n\t\t\t\t\tisSaveInProgress,\n\t\t\t\t\tisSaveFailed,\n\t\t\t\t\tretryMessage,\n\t\t\t\t} ) }\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default BlockMediaUpdateProgress;\n"]}