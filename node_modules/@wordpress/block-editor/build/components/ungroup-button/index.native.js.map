{"version":3,"sources":["@wordpress/block-editor/src/components/ungroup-button/index.native.js"],"names":["UngroupButton","onConvertFromGroup","isUngroupable","UngroupIcon","select","getSelectedBlockClientId","getBlock","blockEditorStore","getGroupingBlockName","blocksStore","selectedId","selectedBlock","groupingBlockName","innerBlocks","length","name","clientId","dispatch","onToggle","noop","replaceBlocks"],"mappings":";;;;;;;;;;;;AAGA;;AAKA;;AACA;;AACA;;AACA;;AACA;;AAKA;;AACA;;AAlBA;AACA;AACA;;AAGA;AACA;AACA;;AAOA;AACA;AACA;AAIO,SAASA,aAAT,CAAwB;AAAEC,EAAAA,kBAAF;AAAsBC,EAAAA,aAAa,GAAG;AAAtC,CAAxB,EAAwE;AAC9E,MAAK,CAAEA,aAAP,EAAuB;AACtB,WAAO,IAAP;AACA;;AACD,SACC,4BAAC,wBAAD,QACC,4BAAC,yBAAD;AACC,IAAA,KAAK,EAAG,cAAI,SAAJ,CADT;AAEC,IAAA,IAAI,EAAGC,aAFR;AAGC,IAAA,OAAO,EAAGF;AAHX,IADD,CADD;AASA;;eAEc,sBAAS,CACvB,sBAAcG,MAAF,IAAc;AACzB,QAAM;AAAEC,IAAAA,wBAAF;AAA4BC,IAAAA;AAA5B,MAAyCF,MAAM,CACpDG,YADoD,CAArD;AAIA,QAAM;AAAEC,IAAAA;AAAF,MAA2BJ,MAAM,CAAEK,aAAF,CAAvC;AAEA,QAAMC,UAAU,GAAGL,wBAAwB,EAA3C;AACA,QAAMM,aAAa,GAAGL,QAAQ,CAAEI,UAAF,CAA9B;AAEA,QAAME,iBAAiB,GAAGJ,oBAAoB,EAA9C;AAEA,QAAMN,aAAa,GAClBS,aAAa,IACbA,aAAa,CAACE,WADd,IAEA,CAAC,CAAEF,aAAa,CAACE,WAAd,CAA0BC,MAF7B,IAGAH,aAAa,CAACI,IAAd,KAAuBH,iBAJxB;AAKA,QAAMC,WAAW,GAAGX,aAAa,GAAGS,aAAa,CAACE,WAAjB,GAA+B,EAAhE;AAEA,SAAO;AACNX,IAAAA,aADM;AAENc,IAAAA,QAAQ,EAAEN,UAFJ;AAGNG,IAAAA;AAHM,GAAP;AAKA,CAxBD,CADuB,EA0BvB,wBAAc,CAAEI,QAAF,EAAY;AAAED,EAAAA,QAAF;AAAYH,EAAAA,WAAZ;AAAyBK,EAAAA,QAAQ,GAAGC;AAApC,CAAZ,KAA4D;AACzE,QAAM;AAAEC,IAAAA;AAAF,MAAoBH,QAAQ,CAAEV,YAAF,CAAlC;AAEA,SAAO;AACNN,IAAAA,kBAAkB,GAAG;AACpB,UAAK,CAAEY,WAAW,CAACC,MAAnB,EAA4B;AAC3B;AACA;;AAEDM,MAAAA,aAAa,CAAEJ,QAAF,EAAYH,WAAZ,CAAb;AAEAK,MAAAA,QAAQ;AACR;;AATK,GAAP;AAWA,CAdD,CA1BuB,CAAT,EAyCVlB,aAzCU,C","sourcesContent":["/**\n * External dependencies\n */\nimport { noop } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { ToolbarGroup, ToolbarButton } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport UngroupIcon from './icon';\nimport { store as blockEditorStore } from '../../store';\n\nexport function UngroupButton( { onConvertFromGroup, isUngroupable = false } ) {\n\tif ( ! isUngroupable ) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarButton\n\t\t\t\ttitle={ __( 'Ungroup' ) }\n\t\t\t\ticon={ UngroupIcon }\n\t\t\t\tonClick={ onConvertFromGroup }\n\t\t\t/>\n\t\t</ToolbarGroup>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { getSelectedBlockClientId, getBlock } = select(\n\t\t\tblockEditorStore\n\t\t);\n\n\t\tconst { getGroupingBlockName } = select( blocksStore );\n\n\t\tconst selectedId = getSelectedBlockClientId();\n\t\tconst selectedBlock = getBlock( selectedId );\n\n\t\tconst groupingBlockName = getGroupingBlockName();\n\n\t\tconst isUngroupable =\n\t\t\tselectedBlock &&\n\t\t\tselectedBlock.innerBlocks &&\n\t\t\t!! selectedBlock.innerBlocks.length &&\n\t\t\tselectedBlock.name === groupingBlockName;\n\t\tconst innerBlocks = isUngroupable ? selectedBlock.innerBlocks : [];\n\n\t\treturn {\n\t\t\tisUngroupable,\n\t\t\tclientId: selectedId,\n\t\t\tinnerBlocks,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId, innerBlocks, onToggle = noop } ) => {\n\t\tconst { replaceBlocks } = dispatch( blockEditorStore );\n\n\t\treturn {\n\t\t\tonConvertFromGroup() {\n\t\t\t\tif ( ! innerBlocks.length ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treplaceBlocks( clientId, innerBlocks );\n\n\t\t\t\tonToggle();\n\t\t\t},\n\t\t};\n\t} ),\n] )( UngroupButton );\n"]}