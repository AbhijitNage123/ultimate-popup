{"version":3,"sources":["@wordpress/jest-console/src/matchers.js"],"names":["matcherHint","printExpected","printReceived","isEqual","reduce","some","supportedMatchers","createToHaveBeenCalledMatcher","matcherName","methodName","received","spy","calls","mock","pass","length","message","getMockName","map","assertionsNumber","createToHaveBeenCalledWith","expected","objects","expect","extend","result","matcherNameWith"],"mappings":";;;;;;AAAA;AACA;AACA;AACA,SAASA,WAAT,EAAsBC,aAAtB,EAAqCC,aAArC,QAA0D,oBAA1D;AACA,SAASC,OAAT,EAAkBC,MAAlB,EAA0BC,IAA1B,QAAsC,QAAtC;AAEA;AACA;AACA;;AACA,OAAOC,iBAAP,MAA8B,sBAA9B;;AAEA,IAAMC,6BAA6B,GAAG,SAAhCA,6BAAgC,CAAEC,WAAF,EAAeC,UAAf;AAAA,SAA+B,UACpEC,QADoE,EAEhE;AACJ,QAAMC,GAAG,GAAGD,QAAQ,CAAED,UAAF,CAApB;AACA,QAAMG,KAAK,GAAGD,GAAG,CAACE,IAAJ,CAASD,KAAvB;AACA,QAAME,IAAI,GAAGF,KAAK,CAACG,MAAN,GAAe,CAA5B;AACA,QAAMC,OAAO,GAAGF,IAAI,GACjB;AAAA,aACAd,WAAW,eAAUQ,WAAV,GAA0BG,GAAG,CAACM,WAAJ,EAA1B,CAAX,GACA,MADA,GAEA,mEAFA,GAGAL,KAAK,CAACM,GAAN,CAAWhB,aAAX,CAJA;AAAA,KADiB,GAMjB;AAAA,aACAF,WAAW,CAAEQ,WAAF,EAAeG,GAAG,CAACM,WAAJ,EAAf,CAAX,GACA,MADA,GAEA,sCAHA;AAAA,KANH;AAWAN,IAAAA,GAAG,CAACQ,gBAAJ,IAAwB,CAAxB;AAEA,WAAO;AACNH,MAAAA,OAAO,EAAPA,OADM;AAENF,MAAAA,IAAI,EAAJA;AAFM,KAAP;AAIA,GAvBqC;AAAA,CAAtC;;AAyBA,IAAMM,0BAA0B,GAAG,SAA7BA,0BAA6B,CAAEZ,WAAF,EAAeC,UAAf;AAAA,SAA+B,UACjEC,QADiE,EAG7D;AAAA,sCADDW,QACC;AADDA,MAAAA,QACC;AAAA;;AACJ,QAAMV,GAAG,GAAGD,QAAQ,CAAED,UAAF,CAApB;AACA,QAAMG,KAAK,GAAGD,GAAG,CAACE,IAAJ,CAASD,KAAvB;AACA,QAAME,IAAI,GAAGT,IAAI,CAAEO,KAAF,EAAS,UAAEU,OAAF;AAAA,aAAenB,OAAO,CAAEmB,OAAF,EAAWD,QAAX,CAAtB;AAAA,KAAT,CAAjB;AACA,QAAML,OAAO,GAAGF,IAAI,GACjB;AAAA,aACAd,WAAW,eAAUQ,WAAV,GAA0BG,GAAG,CAACM,WAAJ,EAA1B,CAAX,GACA,MADA,GAEA,iDAFA,GAGAhB,aAAa,CAAEoB,QAAF,CAJb;AAAA,KADiB,GAMjB;AAAA,aACArB,WAAW,CAAEQ,WAAF,EAAeG,GAAG,CAACM,WAAJ,EAAf,CAAX,GACA,MADA,GAEA,6CAFA,GAGAhB,aAAa,CAAEoB,QAAF,CAHb,GAIA,IAJA,GAKA,2BALA,GAMAT,KAAK,CAACM,GAAN,CAAWhB,aAAX,CAPA;AAAA,KANH;AAeAS,IAAAA,GAAG,CAACQ,gBAAJ,IAAwB,CAAxB;AAEA,WAAO;AACNH,MAAAA,OAAO,EAAPA,OADM;AAENF,MAAAA,IAAI,EAAJA;AAFM,KAAP;AAIA,GA5BkC;AAAA,CAAnC;;AA8BAS,MAAM,CAACC,MAAP,CACCpB,MAAM,CACLE,iBADK,EAEL,UAAEmB,MAAF,EAAUjB,WAAV,EAAuBC,UAAvB,EAAuC;AAAA;;AACtC,MAAMiB,eAAe,aAAOlB,WAAP,SAArB;AAEA,yCACIiB,MADJ,6DAEGjB,WAFH,EAEkBD,6BAA6B,YACxCC,WADwC,GAE7CC,UAF6C,CAF/C,mCAMGiB,eANH,EAMsBN,0BAA0B,YACzCM,eADyC,GAE9CjB,UAF8C,CANhD;AAWA,CAhBI,EAiBL,EAjBK,CADP","sourcesContent":["/**\n * External dependencies\n */\nimport { matcherHint, printExpected, printReceived } from 'jest-matcher-utils';\nimport { isEqual, reduce, some } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport supportedMatchers from './supported-matchers';\n\nconst createToHaveBeenCalledMatcher = ( matcherName, methodName ) => (\n\treceived\n) => {\n\tconst spy = received[ methodName ];\n\tconst calls = spy.mock.calls;\n\tconst pass = calls.length > 0;\n\tconst message = pass\n\t\t? () =>\n\t\t\t\tmatcherHint( `.not${ matcherName }`, spy.getMockName() ) +\n\t\t\t\t'\\n\\n' +\n\t\t\t\t'Expected mock function not to be called but it was called with:\\n' +\n\t\t\t\tcalls.map( printReceived )\n\t\t: () =>\n\t\t\t\tmatcherHint( matcherName, spy.getMockName() ) +\n\t\t\t\t'\\n\\n' +\n\t\t\t\t'Expected mock function to be called.';\n\n\tspy.assertionsNumber += 1;\n\n\treturn {\n\t\tmessage,\n\t\tpass,\n\t};\n};\n\nconst createToHaveBeenCalledWith = ( matcherName, methodName ) => (\n\treceived,\n\t...expected\n) => {\n\tconst spy = received[ methodName ];\n\tconst calls = spy.mock.calls;\n\tconst pass = some( calls, ( objects ) => isEqual( objects, expected ) );\n\tconst message = pass\n\t\t? () =>\n\t\t\t\tmatcherHint( `.not${ matcherName }`, spy.getMockName() ) +\n\t\t\t\t'\\n\\n' +\n\t\t\t\t'Expected mock function not to be called with:\\n' +\n\t\t\t\tprintExpected( expected )\n\t\t: () =>\n\t\t\t\tmatcherHint( matcherName, spy.getMockName() ) +\n\t\t\t\t'\\n\\n' +\n\t\t\t\t'Expected mock function to be called with:\\n' +\n\t\t\t\tprintExpected( expected ) +\n\t\t\t\t'\\n' +\n\t\t\t\t'but it was called with:\\n' +\n\t\t\t\tcalls.map( printReceived );\n\n\tspy.assertionsNumber += 1;\n\n\treturn {\n\t\tmessage,\n\t\tpass,\n\t};\n};\n\nexpect.extend(\n\treduce(\n\t\tsupportedMatchers,\n\t\t( result, matcherName, methodName ) => {\n\t\t\tconst matcherNameWith = `${ matcherName }With`;\n\n\t\t\treturn {\n\t\t\t\t...result,\n\t\t\t\t[ matcherName ]: createToHaveBeenCalledMatcher(\n\t\t\t\t\t`.${ matcherName }`,\n\t\t\t\t\tmethodName\n\t\t\t\t),\n\t\t\t\t[ matcherNameWith ]: createToHaveBeenCalledWith(\n\t\t\t\t\t`.${ matcherNameWith }`,\n\t\t\t\t\tmethodName\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t{}\n\t)\n);\n"]}