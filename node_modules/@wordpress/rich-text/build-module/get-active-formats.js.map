{"version":3,"sources":["@wordpress/rich-text/src/get-active-formats.js"],"names":["getActiveFormats","formats","start","end","activeFormats","EMPTY_ACTIVE_FORMATS","undefined","formatsBefore","formatsAfter","length"],"mappings":"AAAA;;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASA,gBAAT,CACN;AAAEC,EAAAA,OAAF;AAAWC,EAAAA,KAAX;AAAkBC,EAAAA,GAAlB;AAAuBC,EAAAA;AAAvB,CADM,EAENC,oBAAoB,GAAG,EAFjB,EAGL;AACD,MAAKH,KAAK,KAAKI,SAAf,EAA2B;AAC1B,WAAOD,oBAAP;AACA;;AAED,MAAKH,KAAK,KAAKC,GAAf,EAAqB;AACpB;AACA,QAAKC,aAAL,EAAqB;AACpB,aAAOA,aAAP;AACA;;AAED,UAAMG,aAAa,GAAGN,OAAO,CAAEC,KAAK,GAAG,CAAV,CAAP,IAAwBG,oBAA9C;AACA,UAAMG,YAAY,GAAGP,OAAO,CAAEC,KAAF,CAAP,IAAoBG,oBAAzC,CAPoB,CASpB;AACA;AACA;;AACA,QAAKE,aAAa,CAACE,MAAd,GAAuBD,YAAY,CAACC,MAAzC,EAAkD;AACjD,aAAOF,aAAP;AACA;;AAED,WAAOC,YAAP;AACA;;AAED,SAAOP,OAAO,CAAEC,KAAF,CAAP,IAAoBG,oBAA3B;AACA","sourcesContent":["/** @typedef {import('./create').RichTextValue} RichTextValue */\n/** @typedef {import('./create').RichTextFormatList} RichTextFormatList */\n\n/**\n * Gets the all format objects at the start of the selection.\n *\n * @param {RichTextValue} value                Value to inspect.\n * @param {Array}         EMPTY_ACTIVE_FORMATS Array to return if there are no\n *                                             active formats.\n *\n * @return {RichTextFormatList} Active format objects.\n */\nexport function getActiveFormats(\n\t{ formats, start, end, activeFormats },\n\tEMPTY_ACTIVE_FORMATS = []\n) {\n\tif ( start === undefined ) {\n\t\treturn EMPTY_ACTIVE_FORMATS;\n\t}\n\n\tif ( start === end ) {\n\t\t// For a collapsed caret, it is possible to override the active formats.\n\t\tif ( activeFormats ) {\n\t\t\treturn activeFormats;\n\t\t}\n\n\t\tconst formatsBefore = formats[ start - 1 ] || EMPTY_ACTIVE_FORMATS;\n\t\tconst formatsAfter = formats[ start ] || EMPTY_ACTIVE_FORMATS;\n\n\t\t// By default, select the lowest amount of formats possible (which means\n\t\t// the caret is positioned outside the format boundary). The user can\n\t\t// then use arrow keys to define `activeFormats`.\n\t\tif ( formatsBefore.length < formatsAfter.length ) {\n\t\t\treturn formatsBefore;\n\t\t}\n\n\t\treturn formatsAfter;\n\t}\n\n\treturn formats[ start ] || EMPTY_ACTIVE_FORMATS;\n}\n"]}