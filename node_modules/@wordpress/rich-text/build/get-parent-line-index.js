"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getParentLineIndex = getParentLineIndex;

var _specialCharacters = require("./special-characters");

/**
 * Internal dependencies
 */

/** @typedef {import('./create').RichTextValue} RichTextValue */

/**
 * Gets the index of the first parent list. To get the parent list formats, we
 * go through every list item until we find one with exactly one format type
 * less.
 *
 * @param {RichTextValue} value     Value to search.
 * @param {number}        lineIndex Line index of a child list item.
 *
 * @return {number|void} The parent list line index.
 */
function getParentLineIndex({
  text,
  replacements
}, lineIndex) {
  const startFormats = replacements[lineIndex] || [];
  let index = lineIndex;

  while (index-- >= 0) {
    if (text[index] !== _specialCharacters.LINE_SEPARATOR) {
      continue;
    }

    const formatsAtIndex = replacements[index] || [];

    if (formatsAtIndex.length === startFormats.length - 1) {
      return index;
    }
  }
}
//# sourceMappingURL=get-parent-line-index.js.map