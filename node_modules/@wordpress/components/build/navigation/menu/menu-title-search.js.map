{"version":3,"sources":["@wordpress/components/src/navigation/menu/menu-title-search.js"],"names":["MenuTitleSearch","debouncedSpeak","onCloseSearch","onSearch","search","title","navigationTree","items","menu","inputRef","delayedFocus","setTimeout","current","focus","SEARCH_FOCUS_DELAY","clearTimeout","count","length","resultsFoundMessage","onClose","onKeyDown","event","keyCode","ESCAPE","stopPropagation","menuTitleId","inputId","placeholder","searchIcon","target","value","closeSmall"],"mappings":";;;;;;;;;AAQA;;AALA;;AAMA;;AACA;;AACA;;AAKA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAtBA;AACA;AACA;;AAGA;AACA;AACA;;AAMA;AACA;AACA;AASA,SAASA,eAAT,CAA0B;AACzBC,EAAAA,cADyB;AAEzBC,EAAAA,aAFyB;AAGzBC,EAAAA,QAHyB;AAIzBC,EAAAA,MAJyB;AAKzBC,EAAAA;AALyB,CAA1B,EAMI;AACH,QAAM;AACLC,IAAAA,cAAc,EAAE;AAAEC,MAAAA;AAAF;AADX,MAEF,qCAFJ;AAGA,QAAM;AAAEC,IAAAA;AAAF,MAAW,wCAAjB;AACA,QAAMC,QAAQ,GAAG,sBAAjB,CALG,CAOH;AACA;;AACA,0BAAW,MAAM;AAChB,UAAMC,YAAY,GAAGC,UAAU,CAAE,MAAM;AACtCF,MAAAA,QAAQ,CAACG,OAAT,CAAiBC,KAAjB;AACA,KAF8B,EAE5BC,6BAF4B,CAA/B;AAIA,WAAO,MAAM;AACZC,MAAAA,YAAY,CAAEL,YAAF,CAAZ;AACA,KAFD;AAGA,GARD,EAQG,EARH;AAUA,0BAAW,MAAM;AAChB,QAAK,CAAEN,MAAP,EAAgB;AACf;AACA;;AAED,UAAMY,KAAK,GAAG,oBAAQT,KAAR,EAAe,YAAf,EAA8BU,MAA5C;AACA,UAAMC,mBAAmB,GAAG;AAC3B;AACA,kBAAI,kBAAJ,EAAwB,mBAAxB,EAA6CF,KAA7C,CAF2B,EAG3BA,KAH2B,CAA5B;AAKAf,IAAAA,cAAc,CAAEiB,mBAAF,CAAd;AACA,GAZD,EAYG,CAAEX,KAAF,EAASH,MAAT,CAZH;;AAcA,QAAMe,OAAO,GAAG,MAAM;AACrBhB,IAAAA,QAAQ,CAAE,EAAF,CAAR;AACAD,IAAAA,aAAa;AACb,GAHD;;AAKA,WAASkB,SAAT,CAAoBC,KAApB,EAA4B;AAC3B,QAAKA,KAAK,CAACC,OAAN,KAAkBC,gBAAvB,EAAgC;AAC/BF,MAAAA,KAAK,CAACG,eAAN;AACAL,MAAAA,OAAO;AACP;AACD;;AAED,QAAMM,WAAW,GAAI,qCAAqCjB,IAAM,EAAhE;AACA,QAAMkB,OAAO,GAAI,4CAA4ClB,IAAM,EAAnE;AACA;;AACA,QAAMmB,WAAW,GAAG,mBAAS,cAAI,cAAJ,CAAT,EAA+BtB,KAA/B,CAApB;AAEA,SACC,4BAAC,mCAAD;AAAmB,IAAA,SAAS,EAAC;AAA7B,KACC,4BAAC,WAAD;AAAM,IAAA,IAAI,EAAGuB;AAAb,IADD,EAGC,4BAAC,uBAAD;AAAgB,IAAA,EAAE,EAAC,OAAnB;AAA2B,IAAA,OAAO,EAAGF,OAArC;AAA+C,IAAA,EAAE,EAAGD;AAApD,KACGE,WADH,CAHD,EAOC;AACC,IAAA,YAAY,EAAC,KADd;AAEC,IAAA,SAAS,EAAC,gCAFX;AAGC,IAAA,EAAE,EAAGD,OAHN;AAIC,IAAA,QAAQ,EAAKL,KAAF,IAAalB,QAAQ,CAAEkB,KAAK,CAACQ,MAAN,CAAaC,KAAf,CAJjC;AAKC,IAAA,SAAS,EAAGV,SALb;AAMC,IAAA,WAAW,EAAGO,WANf;AAOC,IAAA,GAAG,EAAGlB,QAPP;AAQC,IAAA,IAAI,EAAC,QARN;AASC,IAAA,KAAK,EAAGL;AATT,IAPD,EAmBC,4BAAC,eAAD;AACC,IAAA,OAAO,MADR;AAEC,IAAA,OAAO,EAAC,UAFT;AAGC,IAAA,KAAK,EAAG,cAAI,cAAJ,CAHT;AAIC,IAAA,OAAO,EAAGe;AAJX,KAMC,4BAAC,WAAD;AAAM,IAAA,IAAI,EAAGY;AAAb,IAND,CAnBD,CADD;AA8BA;;eAEc,iCAAoB/B,eAApB,C","sourcesContent":["/**\n * External dependencies\n */\nimport { filter } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { useEffect, useRef } from '@wordpress/element';\nimport { Icon, closeSmall, search as searchIcon } from '@wordpress/icons';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { ESCAPE } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport Button from '../../button';\nimport VisuallyHidden from '../../visually-hidden';\nimport withSpokenMessages from '../../higher-order/with-spoken-messages';\nimport { useNavigationMenuContext } from './context';\nimport { useNavigationContext } from '../context';\nimport { MenuTitleSearchUI } from '../styles/navigation-styles';\nimport { SEARCH_FOCUS_DELAY } from '../constants';\n\nfunction MenuTitleSearch( {\n\tdebouncedSpeak,\n\tonCloseSearch,\n\tonSearch,\n\tsearch,\n\ttitle,\n} ) {\n\tconst {\n\t\tnavigationTree: { items },\n\t} = useNavigationContext();\n\tconst { menu } = useNavigationMenuContext();\n\tconst inputRef = useRef();\n\n\t// Wait for the slide-in animation to complete before autofocusing the input.\n\t// This prevents scrolling to the input during the animation.\n\tuseEffect( () => {\n\t\tconst delayedFocus = setTimeout( () => {\n\t\t\tinputRef.current.focus();\n\t\t}, SEARCH_FOCUS_DELAY );\n\n\t\treturn () => {\n\t\t\tclearTimeout( delayedFocus );\n\t\t};\n\t}, [] );\n\n\tuseEffect( () => {\n\t\tif ( ! search ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst count = filter( items, '_isVisible' ).length;\n\t\tconst resultsFoundMessage = sprintf(\n\t\t\t/* translators: %d: number of results. */\n\t\t\t_n( '%d result found.', '%d results found.', count ),\n\t\t\tcount\n\t\t);\n\t\tdebouncedSpeak( resultsFoundMessage );\n\t}, [ items, search ] );\n\n\tconst onClose = () => {\n\t\tonSearch( '' );\n\t\tonCloseSearch();\n\t};\n\n\tfunction onKeyDown( event ) {\n\t\tif ( event.keyCode === ESCAPE ) {\n\t\t\tevent.stopPropagation();\n\t\t\tonClose();\n\t\t}\n\t}\n\n\tconst menuTitleId = `components-navigation__menu-title-${ menu }`;\n\tconst inputId = `components-navigation__menu-title-search-${ menu }`;\n\t/* translators: placeholder for menu search box. %s: menu title */\n\tconst placeholder = sprintf( __( 'Search in %s' ), title );\n\n\treturn (\n\t\t<MenuTitleSearchUI className=\"components-navigation__menu-title-search\">\n\t\t\t<Icon icon={ searchIcon } />\n\n\t\t\t<VisuallyHidden as=\"label\" htmlFor={ inputId } id={ menuTitleId }>\n\t\t\t\t{ placeholder }\n\t\t\t</VisuallyHidden>\n\n\t\t\t<input\n\t\t\t\tautoComplete=\"off\"\n\t\t\t\tclassName=\"components-text-control__input\"\n\t\t\t\tid={ inputId }\n\t\t\t\tonChange={ ( event ) => onSearch( event.target.value ) }\n\t\t\t\tonKeyDown={ onKeyDown }\n\t\t\t\tplaceholder={ placeholder }\n\t\t\t\tref={ inputRef }\n\t\t\t\ttype=\"search\"\n\t\t\t\tvalue={ search }\n\t\t\t/>\n\n\t\t\t<Button\n\t\t\t\tisSmall\n\t\t\t\tvariant=\"tertiary\"\n\t\t\t\tlabel={ __( 'Close search' ) }\n\t\t\t\tonClick={ onClose }\n\t\t\t>\n\t\t\t\t<Icon icon={ closeSmall } />\n\t\t\t</Button>\n\t\t</MenuTitleSearchUI>\n\t);\n}\n\nexport default withSpokenMessages( MenuTitleSearch );\n"]}