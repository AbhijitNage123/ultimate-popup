{"version":3,"sources":["@wordpress/components/src/modal/frame.js"],"names":["ModalFrameContent","overlayClassName","contentLabel","aria","describedby","labelledby","children","className","role","style","focusOnMount","shouldCloseOnEsc","onRequestClose","handleEscapeKeyDown","event","keyCode","ESCAPE","stopPropagation","focusOnMountRef","constrainedTabbingRef","focusReturnRef","ModalFrame","Component","constructor","arguments","handleFocusOutside","bind","props","shouldCloseOnClickOutside","render"],"mappings":";;;;;;;;;AASA;;AANA;;AAOA;;AACA;;AAUA;;AArBA;AACA;AACA;;AAGA;AACA;AACA;;AAWA;AACA;AACA;AAGA,SAASA,iBAAT,CAA4B;AAC3BC,EAAAA,gBAD2B;AAE3BC,EAAAA,YAF2B;AAG3BC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,WAAF;AAAeC,IAAAA;AAAf,GAHqB;AAI3BC,EAAAA,QAJ2B;AAK3BC,EAAAA,SAL2B;AAM3BC,EAAAA,IAN2B;AAO3BC,EAAAA,KAP2B;AAQ3BC,EAAAA,YAR2B;AAS3BC,EAAAA,gBAT2B;AAU3BC,EAAAA;AAV2B,CAA5B,EAWI;AACH,WAASC,mBAAT,CAA8BC,KAA9B,EAAsC;AACrC,QAAKH,gBAAgB,IAAIG,KAAK,CAACC,OAAN,KAAkBC,gBAA3C,EAAoD;AACnDF,MAAAA,KAAK,CAACG,eAAN;;AACA,UAAKL,cAAL,EAAsB;AACrBA,QAAAA,cAAc,CAAEE,KAAF,CAAd;AACA;AACD;AACD;;AACD,QAAMI,eAAe,GAAG,8BAAiBR,YAAjB,CAAxB;AACA,QAAMS,qBAAqB,GAAG,qCAA9B;AACA,QAAMC,cAAc,GAAG,8BAAvB;AAEA,SACC;AACA;AACC,MAAA,SAAS,EAAG,yBACX,kCADW,EAEXnB,gBAFW,CADb;AAKC,MAAA,SAAS,EAAGY;AALb,OAOC;AACC,MAAA,SAAS,EAAG,yBAAY,yBAAZ,EAAuCN,SAAvC,CADb;AAEC,MAAA,KAAK,EAAGE,KAFT;AAGC,MAAA,GAAG,EAAG,2BAAc,CACnBU,qBADmB,EAEnBC,cAFmB,EAGnBF,eAHmB,CAAd,CAHP;AAQC,MAAA,IAAI,EAAGV,IARR;AASC,oBAAaN,YATd;AAUC,yBAAkBA,YAAY,GAAG,IAAH,GAAUG,UAVzC;AAWC,0BAAmBD,WAXpB;AAYC,MAAA,QAAQ,EAAC;AAZV,OAcGE,QAdH,CAPD;AAFD;AA2BA;;AAED,MAAMe,UAAN,SAAyBC,kBAAzB,CAAmC;AAClCC,EAAAA,WAAW,GAAG;AACb,UAAO,GAAGC,SAAV;AACA,SAAKC,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBC,IAAxB,CAA8B,IAA9B,CAA1B;AACA;AAED;AACD;AACA;AACA;AACA;;;AACCD,EAAAA,kBAAkB,CAAEX,KAAF,EAAU;AAC3B,QACC,KAAKa,KAAL,CAAWC,yBAAX,IACA,KAAKD,KAAL,CAAWf,cAFZ,EAGE;AACD,WAAKe,KAAL,CAAWf,cAAX,CAA2BE,KAA3B;AACA;AACD;AAED;AACD;AACA;AACA;AACA;;;AACCe,EAAAA,MAAM,GAAG;AACR,WAAO,4BAAC,iBAAD,EAAwB,KAAKF,KAA7B,CAAP;AACA;;AA3BiC;;eA8BpB,+BAAkBN,UAAlB,C","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\n\nimport { Component } from '@wordpress/element';\nimport { ESCAPE } from '@wordpress/keycodes';\nimport {\n\tuseFocusReturn,\n\tuseFocusOnMount,\n\tuseConstrainedTabbing,\n\tuseMergeRefs,\n} from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport withFocusOutside from '../higher-order/with-focus-outside';\n\nfunction ModalFrameContent( {\n\toverlayClassName,\n\tcontentLabel,\n\taria: { describedby, labelledby },\n\tchildren,\n\tclassName,\n\trole,\n\tstyle,\n\tfocusOnMount,\n\tshouldCloseOnEsc,\n\tonRequestClose,\n} ) {\n\tfunction handleEscapeKeyDown( event ) {\n\t\tif ( shouldCloseOnEsc && event.keyCode === ESCAPE ) {\n\t\t\tevent.stopPropagation();\n\t\t\tif ( onRequestClose ) {\n\t\t\t\tonRequestClose( event );\n\t\t\t}\n\t\t}\n\t}\n\tconst focusOnMountRef = useFocusOnMount( focusOnMount );\n\tconst constrainedTabbingRef = useConstrainedTabbing();\n\tconst focusReturnRef = useFocusReturn();\n\n\treturn (\n\t\t// eslint-disable-next-line jsx-a11y/no-static-element-interactions\n\t\t<div\n\t\t\tclassName={ classnames(\n\t\t\t\t'components-modal__screen-overlay',\n\t\t\t\toverlayClassName\n\t\t\t) }\n\t\t\tonKeyDown={ handleEscapeKeyDown }\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={ classnames( 'components-modal__frame', className ) }\n\t\t\t\tstyle={ style }\n\t\t\t\tref={ useMergeRefs( [\n\t\t\t\t\tconstrainedTabbingRef,\n\t\t\t\t\tfocusReturnRef,\n\t\t\t\t\tfocusOnMountRef,\n\t\t\t\t] ) }\n\t\t\t\trole={ role }\n\t\t\t\taria-label={ contentLabel }\n\t\t\t\taria-labelledby={ contentLabel ? null : labelledby }\n\t\t\t\taria-describedby={ describedby }\n\t\t\t\ttabIndex=\"-1\"\n\t\t\t>\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nclass ModalFrame extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.handleFocusOutside = this.handleFocusOutside.bind( this );\n\t}\n\n\t/**\n\t * Callback function called when clicked outside the modal.\n\t *\n\t * @param {Object} event Mouse click event.\n\t */\n\thandleFocusOutside( event ) {\n\t\tif (\n\t\t\tthis.props.shouldCloseOnClickOutside &&\n\t\t\tthis.props.onRequestClose\n\t\t) {\n\t\t\tthis.props.onRequestClose( event );\n\t\t}\n\t}\n\n\t/**\n\t * Renders the modal frame element.\n\t *\n\t * @return {WPElement} The modal frame element.\n\t */\n\trender() {\n\t\treturn <ModalFrameContent { ...this.props } />;\n\t}\n}\n\nexport default withFocusOutside( ModalFrame );\n"]}