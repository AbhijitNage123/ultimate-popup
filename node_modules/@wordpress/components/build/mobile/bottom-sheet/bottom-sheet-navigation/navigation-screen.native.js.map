{"version":3,"sources":["@wordpress/components/src/mobile/bottom-sheet/bottom-sheet-navigation/navigation-screen.native.js"],"names":["BottomSheetNavigationScreen","children","fullScreen","isScrollable","isNested","navigation","heightRef","maxHeight","isFocused","onHandleHardwareButtonPress","shouldEnableBottomSheetMaxHeight","setIsFullScreen","listProps","safeAreaBottomInset","BottomSheetContext","setHeight","BottomSheetNavigationContext","setHeightDebounce","canGoBack","goBack","current","onLayout","nativeEvent","height","layout","styles","scrollableContent","paddingBottom"],"mappings":";;;;;;;;;AAgBA;;AAbA;;AAKA;;AACA;;AAKA;;AAOA;;AACA;;AAtBA;AACA;AACA;;AASA;AACA;AACA;;AAKA;AACA;AACA;AAIA,MAAMA,2BAA2B,GAAG,CAAE;AACrCC,EAAAA,QADqC;AAErCC,EAAAA,UAFqC;AAGrCC,EAAAA,YAHqC;AAIrCC,EAAAA;AAJqC,CAAF,KAK7B;AACN,QAAMC,UAAU,GAAG,4BAAnB;AACA,QAAMC,SAAS,GAAG,qBAAQ;AAAEC,IAAAA,SAAS,EAAE;AAAb,GAAR,CAAlB;AACA,QAAMC,SAAS,GAAG,2BAAlB;AACA,QAAM;AACLC,IAAAA,2BADK;AAELC,IAAAA,gCAFK;AAGLC,IAAAA,eAHK;AAILC,IAAAA,SAJK;AAKLC,IAAAA;AALK,MAMF,yBAAYC,8BAAZ,CANJ;AAQA,QAAM;AAAEC,IAAAA;AAAF,MAAgB,yBAAYC,0DAAZ,CAAtB;AAEA,QAAMC,iBAAiB,GAAG,0BAAa,sBAAUF,SAAV,EAAqB,EAArB,CAAb,EAAwC,CACjEA,SADiE,CAAxC,CAA1B;AAIA,8BACC,0BAAa,MAAM;AAClBN,IAAAA,2BAA2B,CAAE,MAAM;AAClC,UAAKJ,UAAU,CAACa,SAAX,EAAL,EAA8B;AAC7BR,QAAAA,gCAAgC,CAAE,IAAF,CAAhC;AACAL,QAAAA,UAAU,CAACc,MAAX;AACA,eAAO,IAAP;AACA;;AACDV,MAAAA,2BAA2B,CAAE,IAAF,CAA3B;AACA,aAAO,KAAP;AACA,KAR0B,CAA3B;;AASA,QAAKP,UAAL,EAAkB;AACjBa,MAAAA,SAAS,CAAE,MAAF,CAAT;AACAJ,MAAAA,eAAe,CAAE,IAAF,CAAf;AACA,KAHD,MAGO,IAAKL,SAAS,CAACc,OAAV,CAAkBb,SAAlB,KAAgC,CAArC,EAAyC;AAC/CI,MAAAA,eAAe,CAAE,KAAF,CAAf;AACAI,MAAAA,SAAS,CAAET,SAAS,CAACc,OAAV,CAAkBb,SAApB,CAAT;AACA;;AACD,WAAO,MAAM,CAAE,CAAf;AACA,GAlBD,EAkBG,EAlBH,CADD;;AAqBA,QAAMc,QAAQ,GAAG,CAAE;AAAEC,IAAAA;AAAF,GAAF,KAAuB;AACvC,QAAKpB,UAAL,EAAkB;AACjB;AACA;;AACD,UAAM;AAAEqB,MAAAA;AAAF,QAAaD,WAAW,CAACE,MAA/B;;AAEA,QAAKlB,SAAS,CAACc,OAAV,CAAkBb,SAAlB,KAAgCgB,MAAhC,IAA0Cf,SAA/C,EAA2D;AAC1DF,MAAAA,SAAS,CAACc,OAAV,CAAkBb,SAAlB,GAA8BgB,MAA9B;AACAN,MAAAA,iBAAiB,CAAEM,MAAF,CAAjB;AACA;AACD,GAVD;;AAWA,SAAO,sBAAS,MAAM;AACrB,WAAOpB,YAAY,IAAIC,QAAhB,GACN,4BAAC,iBAAD;AAAM,MAAA,QAAQ,EAAGiB;AAAjB,OAA8BpB,QAA9B,CADM,GAGN,4BAAC,uBAAD,EAAiBW,SAAjB,EACC,4BAAC,+BAAD;AAAoB,MAAA,UAAU,EAAG;AAAjC,OACC,4BAAC,iBAAD;AAAM,MAAA,QAAQ,EAAGS;AAAjB,OACGpB,QADH,EAEG,CAAEG,QAAF,IACD,4BAAC,iBAAD;AACC,MAAA,KAAK,EAAG;AACPmB,QAAAA,MAAM,EACLV,mBAAmB,IACnBY,gBAAOC,iBAAP,CAAyBC;AAHnB;AADT,MAHF,CADD,CADD,CAHD;AAoBA,GArBM,EAqBJ,CAAE1B,QAAF,EAAYO,SAAZ,EAAuBK,mBAAvB,EAA4CD,SAA5C,CArBI,CAAP;AAsBA,CA7ED;;eA+EeZ,2B","sourcesContent":["/**\n * External dependencies\n */\nimport {\n\tuseIsFocused,\n\tuseNavigation,\n\tuseFocusEffect,\n} from '@react-navigation/native';\nimport { View, ScrollView, TouchableHighlight } from 'react-native';\nimport { debounce } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { BottomSheetContext } from '@wordpress/components';\n\nimport { useRef, useCallback, useContext, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { BottomSheetNavigationContext } from './bottom-sheet-navigation-context';\nimport styles from './styles.scss';\n\nconst BottomSheetNavigationScreen = ( {\n\tchildren,\n\tfullScreen,\n\tisScrollable,\n\tisNested,\n} ) => {\n\tconst navigation = useNavigation();\n\tconst heightRef = useRef( { maxHeight: 0 } );\n\tconst isFocused = useIsFocused();\n\tconst {\n\t\tonHandleHardwareButtonPress,\n\t\tshouldEnableBottomSheetMaxHeight,\n\t\tsetIsFullScreen,\n\t\tlistProps,\n\t\tsafeAreaBottomInset,\n\t} = useContext( BottomSheetContext );\n\n\tconst { setHeight } = useContext( BottomSheetNavigationContext );\n\n\tconst setHeightDebounce = useCallback( debounce( setHeight, 10 ), [\n\t\tsetHeight,\n\t] );\n\n\tuseFocusEffect(\n\t\tuseCallback( () => {\n\t\t\tonHandleHardwareButtonPress( () => {\n\t\t\t\tif ( navigation.canGoBack() ) {\n\t\t\t\t\tshouldEnableBottomSheetMaxHeight( true );\n\t\t\t\t\tnavigation.goBack();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tonHandleHardwareButtonPress( null );\n\t\t\t\treturn false;\n\t\t\t} );\n\t\t\tif ( fullScreen ) {\n\t\t\t\tsetHeight( '100%' );\n\t\t\t\tsetIsFullScreen( true );\n\t\t\t} else if ( heightRef.current.maxHeight !== 0 ) {\n\t\t\t\tsetIsFullScreen( false );\n\t\t\t\tsetHeight( heightRef.current.maxHeight );\n\t\t\t}\n\t\t\treturn () => {};\n\t\t}, [] )\n\t);\n\tconst onLayout = ( { nativeEvent } ) => {\n\t\tif ( fullScreen ) {\n\t\t\treturn;\n\t\t}\n\t\tconst { height } = nativeEvent.layout;\n\n\t\tif ( heightRef.current.maxHeight !== height && isFocused ) {\n\t\t\theightRef.current.maxHeight = height;\n\t\t\tsetHeightDebounce( height );\n\t\t}\n\t};\n\treturn useMemo( () => {\n\t\treturn isScrollable || isNested ? (\n\t\t\t<View onLayout={ onLayout }>{ children }</View>\n\t\t) : (\n\t\t\t<ScrollView { ...listProps }>\n\t\t\t\t<TouchableHighlight accessible={ false }>\n\t\t\t\t\t<View onLayout={ onLayout }>\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t\t{ ! isNested && (\n\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\theight:\n\t\t\t\t\t\t\t\t\t\tsafeAreaBottomInset ||\n\t\t\t\t\t\t\t\t\t\tstyles.scrollableContent.paddingBottom,\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</View>\n\t\t\t\t</TouchableHighlight>\n\t\t\t</ScrollView>\n\t\t);\n\t}, [ children, isFocused, safeAreaBottomInset, listProps ] );\n};\n\nexport default BottomSheetNavigationScreen;\n"]}