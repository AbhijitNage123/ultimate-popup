{"version":3,"sources":["@wordpress/components/src/color-edit/index.js"],"names":["classnames","isEmpty","kebabCase","__","sprintf","useEffect","useState","edit","close","chevronDown","chevronUp","plus","Dropdown","CircularOptionPicker","ColorPicker","Button","TextControl","BaseControl","DropdownOpenOnMount","shouldOpen","isOpen","onToggle","ColorOption","color","name","slug","onChange","onRemove","onConfirm","confirmLabel","isEditingNameOnMount","isEditingColorOnMount","onCancel","immutableColorSlugs","isHover","setIsHover","isFocused","setIsFocused","isEditingName","setIsEditingName","isShowingAdvancedPanel","setIsShowingAdvancedPanel","isShowingControls","includes","backgroundColor","newColor","hex","newColorName","newSlug","ColorInserter","onInsert","setColor","ColorEdit","colors","emptyUI","canReset","isInsertingColor","setIsInsertingColor","map","index","currentColor","currentIndex","filter","_currentColor"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { isEmpty, kebabCase } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useEffect, useState } from '@wordpress/element';\nimport { edit, close, chevronDown, chevronUp, plus } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport Dropdown from '../dropdown';\nimport CircularOptionPicker from '../circular-option-picker';\nimport ColorPicker from '../color-picker';\nimport Button from '../button';\nimport TextControl from '../text-control';\nimport BaseControl from '../base-control';\n\nfunction DropdownOpenOnMount( { shouldOpen, isOpen, onToggle } ) {\n\tuseEffect( () => {\n\t\tif ( shouldOpen && ! isOpen ) {\n\t\t\tonToggle();\n\t\t}\n\t}, [] );\n\treturn null;\n}\n\nfunction ColorOption( {\n\tcolor,\n\tname,\n\tslug,\n\tonChange,\n\tonRemove,\n\tonConfirm,\n\tconfirmLabel = __( 'OK' ),\n\tisEditingNameOnMount = false,\n\tisEditingColorOnMount = false,\n\tonCancel,\n\timmutableColorSlugs = [],\n} ) {\n\tconst [ isHover, setIsHover ] = useState( false );\n\tconst [ isFocused, setIsFocused ] = useState( false );\n\tconst [ isEditingName, setIsEditingName ] = useState(\n\t\tisEditingNameOnMount\n\t);\n\tconst [ isShowingAdvancedPanel, setIsShowingAdvancedPanel ] = useState(\n\t\tfalse\n\t);\n\n\tconst isShowingControls =\n\t\t( isHover || isFocused || isEditingName || isShowingAdvancedPanel ) &&\n\t\t! immutableColorSlugs.includes( slug );\n\n\treturn (\n\t\t<div\n\t\t\ttabIndex={ 0 }\n\t\t\tclassName={ classnames( 'components-color-edit__color-option', {\n\t\t\t\t'is-hover':\n\t\t\t\t\tisHover && ! isEditingName && ! isShowingAdvancedPanel,\n\t\t\t} ) }\n\t\t\tonMouseEnter={ () => setIsHover( true ) }\n\t\t\tonMouseLeave={ () => setIsHover( false ) }\n\t\t\tonFocus={ () => setIsFocused( true ) }\n\t\t\tonBlur={ () => setIsFocused( false ) }\n\t\t\taria-label={\n\t\t\t\tname\n\t\t\t\t\t? // translators: %s: The name of the color e.g: \"vivid red\".\n\t\t\t\t\t  sprintf( __( 'Color: %s' ), name )\n\t\t\t\t\t: // translators: %s: color hex code e.g: \"#f00\".\n\t\t\t\t\t  sprintf( __( 'Color code: %s' ), color )\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"components-color-edit__color-option-main-area\">\n\t\t\t\t<Dropdown\n\t\t\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<DropdownOpenOnMount\n\t\t\t\t\t\t\t\tshouldOpen={ isEditingColorOnMount }\n\t\t\t\t\t\t\t\tisOpen={ isOpen }\n\t\t\t\t\t\t\t\tonToggle={ onToggle }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CircularOptionPicker.Option\n\t\t\t\t\t\t\t\tstyle={ { backgroundColor: color, color } }\n\t\t\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\t\t\taria-label={ __( 'Edit color value' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) }\n\t\t\t\t\trenderContent={ () => (\n\t\t\t\t\t\t<ColorPicker\n\t\t\t\t\t\t\tcolor={ color }\n\t\t\t\t\t\t\tonChangeComplete={ ( newColor ) =>\n\t\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t\tcolor: newColor.hex,\n\t\t\t\t\t\t\t\t\tslug,\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdisableAlpha\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t\t{ ! isEditingName && (\n\t\t\t\t\t<div className=\"components-color-edit__color-option-color-name\">\n\t\t\t\t\t\t{ name }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t\t{ isEditingName && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tclassName=\"components-color-edit__color-option-color-name-input\"\n\t\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t\t\tonChange={ ( newColorName ) =>\n\t\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t\tcolor,\n\t\t\t\t\t\t\t\t\tslug: kebabCase( newColorName ),\n\t\t\t\t\t\t\t\t\tname: newColorName,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlabel={ __( 'Color name' ) }\n\t\t\t\t\t\t\tplaceholder={ __( 'Name' ) }\n\t\t\t\t\t\t\tvalue={ name }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tsetIsEditingName( false );\n\t\t\t\t\t\t\t\tsetIsFocused( false );\n\t\t\t\t\t\t\t\tif ( onConfirm ) {\n\t\t\t\t\t\t\t\t\tonConfirm();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ confirmLabel }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\t{ ! isEditingName && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName={ classnames( {\n\t\t\t\t\t\t\t\t'components-color-edit__hidden-control': ! isShowingControls,\n\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\ticon={ edit }\n\t\t\t\t\t\t\tlabel={ __( 'Edit color name' ) }\n\t\t\t\t\t\t\tonClick={ () => setIsEditingName( true ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName={ classnames( {\n\t\t\t\t\t\t\t\t'components-color-edit__hidden-control': ! isShowingControls,\n\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\ticon={ close }\n\t\t\t\t\t\t\tlabel={ __( 'Remove color' ) }\n\t\t\t\t\t\t\tonClick={ onRemove }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\t<Button\n\t\t\t\t\tclassName={ classnames( {\n\t\t\t\t\t\t'components-color-edit__hidden-control': ! isShowingControls,\n\t\t\t\t\t} ) }\n\t\t\t\t\ticon={ isShowingAdvancedPanel ? chevronUp : chevronDown }\n\t\t\t\t\tlabel={ __( 'Additional color settings' ) }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tif ( isShowingAdvancedPanel ) {\n\t\t\t\t\t\t\tsetIsFocused( false );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetIsShowingAdvancedPanel( ! isShowingAdvancedPanel );\n\t\t\t\t\t} }\n\t\t\t\t\taria-expanded={ isShowingAdvancedPanel }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{ onCancel && (\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"components-color-edit__cancel-button\"\n\t\t\t\t\tonClick={ onCancel }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t</Button>\n\t\t\t) }\n\t\t\t{ isShowingAdvancedPanel && (\n\t\t\t\t<TextControl\n\t\t\t\t\tclassName=\"components-color-edit__slug-input\"\n\t\t\t\t\tonChange={ ( newSlug ) =>\n\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\tcolor,\n\t\t\t\t\t\t\tslug: newSlug,\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t} )\n\t\t\t\t\t}\n\t\t\t\t\tlabel={ __( 'Slug' ) }\n\t\t\t\t\tvalue={ slug }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nfunction ColorInserter( { onInsert, onCancel } ) {\n\tconst [ color, setColor ] = useState( {\n\t\tcolor: '#fff',\n\t\tname: '',\n\t\tslug: '',\n\t} );\n\treturn (\n\t\t<ColorOption\n\t\t\tcolor={ color.color }\n\t\t\tname={ color.name }\n\t\t\tslug={ color.slug }\n\t\t\tonChange={ setColor }\n\t\t\tconfirmLabel={ __( 'Save' ) }\n\t\t\tonConfirm={ () => onInsert( color ) }\n\t\t\tisEditingNameOnMount\n\t\t\tisEditingColorOnMount\n\t\t\tonCancel={ onCancel }\n\t\t/>\n\t);\n}\n\nexport default function ColorEdit( {\n\tcolors,\n\tonChange,\n\temptyUI,\n\timmutableColorSlugs,\n\tcanReset = true,\n} ) {\n\tconst [ isInsertingColor, setIsInsertingColor ] = useState( false );\n\treturn (\n\t\t<BaseControl>\n\t\t\t<fieldset>\n\t\t\t\t<div className=\"components-color-edit__label-and-insert-container\">\n\t\t\t\t\t<legend>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<BaseControl.VisualLabel>\n\t\t\t\t\t\t\t\t{ __( 'Color palette' ) }\n\t\t\t\t\t\t\t</BaseControl.VisualLabel>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</legend>\n\t\t\t\t\t{ ! isInsertingColor && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tsetIsInsertingColor( true );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tclassName=\"components-color-edit__insert-button\"\n\t\t\t\t\t\t\ticon={ plus }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{ ! isEmpty( colors ) &&\n\t\t\t\t\t\tcolors.map( ( color, index ) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<ColorOption\n\t\t\t\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t\t\t\t\tcolor={ color.color }\n\t\t\t\t\t\t\t\t\tname={ color.name }\n\t\t\t\t\t\t\t\t\tslug={ color.slug }\n\t\t\t\t\t\t\t\t\timmutableColorSlugs={ immutableColorSlugs }\n\t\t\t\t\t\t\t\t\tonChange={ ( newColor ) => {\n\t\t\t\t\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t\t\t\t\tcolors.map(\n\t\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentColor,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentIndex\n\t\t\t\t\t\t\t\t\t\t\t\t) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentIndex === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn newColor;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn currentColor;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tonRemove={ () => {\n\t\t\t\t\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t\t\t\t\tcolors.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t\t_currentColor,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentIndex\n\t\t\t\t\t\t\t\t\t\t\t\t) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentIndex === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t{ isInsertingColor && (\n\t\t\t\t\t\t<ColorInserter\n\t\t\t\t\t\t\tonInsert={ ( newColor ) => {\n\t\t\t\t\t\t\t\tsetIsInsertingColor( false );\n\t\t\t\t\t\t\t\tonChange( [ ...( colors || [] ), newColor ] );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonCancel={ () => setIsInsertingColor( false ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ ! isInsertingColor && isEmpty( colors ) && emptyUI }\n\t\t\t\t</div>\n\t\t\t\t{ !! canReset && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisSmall\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\tclassName=\"components-color-edit__reset-button\"\n\t\t\t\t\t\tonClick={ () => onChange() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Reset' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t</fieldset>\n\t\t</BaseControl>\n\t);\n}\n"]}