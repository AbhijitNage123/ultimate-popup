{"version":3,"sources":["@wordpress/components/src/unit-control/utils.js"],"names":["isEmpty","__","_x","Platform","isWeb","OS","allUnits","px","value","label","default","a11yLabel","step","percent","em","rem","vw","vh","vmin","vmax","ch","ex","cm","mm","in","pc","pt","ALL_CSS_UNITS","Object","values","CSS_UNITS","DEFAULT_UNIT","getParsedValue","unit","units","initialValue","parseUnit","hasUnits","length","String","trim","num","parseFloat","isNaN","unitMatch","match","undefined","toLowerCase","find","item","getValidParsedUnit","next","fallbackValue","fallbackUnit","parsedValue","parsedUnit","baseValue","baseUnit","parseA11yLabelForUnit","filterUnitsWithSettings","settings","filter","includes","useCustomUnits","availableUnits","defaultValues","usedUnits","forEach","i"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,OAAT,QAAwB,QAAxB;AAEA;AACA;AACA;;AACA,SAASC,EAAT,EAAaC,EAAb,QAAuB,iBAAvB;AACA,SAASC,QAAT,QAAyB,oBAAzB;AAEA,MAAMC,KAAK,GAAGD,QAAQ,CAACE,EAAT,KAAgB,KAA9B;AAEA,MAAMC,QAAQ,GAAG;AAChBC,EAAAA,EAAE,EAAE;AACHC,IAAAA,KAAK,EAAE,IADJ;AAEHC,IAAAA,KAAK,EAAEL,KAAK,GAAG,IAAH,GAAUH,EAAE,CAAE,aAAF,CAFrB;AAGHS,IAAAA,OAAO,EAAE,EAHN;AAIHC,IAAAA,SAAS,EAAEV,EAAE,CAAE,aAAF,CAJV;AAKHW,IAAAA,IAAI,EAAE;AALH,GADY;AAQhBC,EAAAA,OAAO,EAAE;AACRL,IAAAA,KAAK,EAAE,GADC;AAERC,IAAAA,KAAK,EAAEL,KAAK,GAAG,GAAH,GAASH,EAAE,CAAE,gBAAF,CAFf;AAGRS,IAAAA,OAAO,EAAE,EAHD;AAIRC,IAAAA,SAAS,EAAEV,EAAE,CAAE,aAAF,CAJL;AAKRW,IAAAA,IAAI,EAAE;AALE,GARO;AAehBE,EAAAA,EAAE,EAAE;AACHN,IAAAA,KAAK,EAAE,IADJ;AAEHC,IAAAA,KAAK,EAAEL,KAAK,GAAG,IAAH,GAAUH,EAAE,CAAE,mCAAF,CAFrB;AAGHS,IAAAA,OAAO,EAAE,EAHN;AAIHC,IAAAA,SAAS,EAAET,EAAE,CAAE,KAAF,EAAS,mCAAT,CAJV;AAKHU,IAAAA,IAAI,EAAE;AALH,GAfY;AAsBhBG,EAAAA,GAAG,EAAE;AACJP,IAAAA,KAAK,EAAE,KADH;AAEJC,IAAAA,KAAK,EAAEL,KAAK,GAAG,KAAH,GAAWH,EAAE,CAAE,kCAAF,CAFrB;AAGJS,IAAAA,OAAO,EAAE,EAHL;AAIJC,IAAAA,SAAS,EAAET,EAAE,CAAE,MAAF,EAAU,kCAAV,CAJT;AAKJU,IAAAA,IAAI,EAAE;AALF,GAtBW;AA6BhBI,EAAAA,EAAE,EAAE;AACHR,IAAAA,KAAK,EAAE,IADJ;AAEHC,IAAAA,KAAK,EAAEL,KAAK,GAAG,IAAH,GAAUH,EAAE,CAAE,qBAAF,CAFrB;AAGHS,IAAAA,OAAO,EAAE,EAHN;AAIHC,IAAAA,SAAS,EAAEV,EAAE,CAAE,qBAAF,CAJV;AAKHW,IAAAA,IAAI,EAAE;AALH,GA7BY;AAoChBK,EAAAA,EAAE,EAAE;AACHT,IAAAA,KAAK,EAAE,IADJ;AAEHC,IAAAA,KAAK,EAAEL,KAAK,GAAG,IAAH,GAAUH,EAAE,CAAE,sBAAF,CAFrB;AAGHS,IAAAA,OAAO,EAAE,EAHN;AAIHC,IAAAA,SAAS,EAAEV,EAAE,CAAE,sBAAF,CAJV;AAKHW,IAAAA,IAAI,EAAE;AALH,GApCY;AA2ChBM,EAAAA,IAAI,EAAE;AACLV,IAAAA,KAAK,EAAE,MADF;AAELC,IAAAA,KAAK,EAAEL,KAAK,GAAG,MAAH,GAAYH,EAAE,CAAE,oCAAF,CAFrB;AAGLS,IAAAA,OAAO,EAAE,EAHJ;AAILC,IAAAA,SAAS,EAAEV,EAAE,CAAE,oCAAF,CAJR;AAKLW,IAAAA,IAAI,EAAE;AALD,GA3CU;AAkDhBO,EAAAA,IAAI,EAAE;AACLX,IAAAA,KAAK,EAAE,MADF;AAELC,IAAAA,KAAK,EAAEL,KAAK,GAAG,MAAH,GAAYH,EAAE,CAAE,mCAAF,CAFrB;AAGLS,IAAAA,OAAO,EAAE,EAHJ;AAILC,IAAAA,SAAS,EAAEV,EAAE,CAAE,mCAAF,CAJR;AAKLW,IAAAA,IAAI,EAAE;AALD,GAlDU;AAyDhBQ,EAAAA,EAAE,EAAE;AACHZ,IAAAA,KAAK,EAAE,IADJ;AAEHC,IAAAA,KAAK,EAAEL,KAAK,GAAG,IAAH,GAAUH,EAAE,CAAE,sCAAF,CAFrB;AAGHS,IAAAA,OAAO,EAAE,EAHN;AAIHC,IAAAA,SAAS,EAAEV,EAAE,CAAE,sCAAF,CAJV;AAKHW,IAAAA,IAAI,EAAE;AALH,GAzDY;AAgEhBS,EAAAA,EAAE,EAAE;AACHb,IAAAA,KAAK,EAAE,IADJ;AAEHC,IAAAA,KAAK,EAAEL,KAAK,GAAG,IAAH,GAAUH,EAAE,CAAE,2BAAF,CAFrB;AAGHS,IAAAA,OAAO,EAAE,EAHN;AAIHC,IAAAA,SAAS,EAAEV,EAAE,CAAE,2BAAF,CAJV;AAKHW,IAAAA,IAAI,EAAE;AALH,GAhEY;AAuEhBU,EAAAA,EAAE,EAAE;AACHd,IAAAA,KAAK,EAAE,IADJ;AAEHC,IAAAA,KAAK,EAAEL,KAAK,GAAG,IAAH,GAAUH,EAAE,CAAE,kBAAF,CAFrB;AAGHS,IAAAA,OAAO,EAAE,EAHN;AAIHC,IAAAA,SAAS,EAAEV,EAAE,CAAE,kBAAF,CAJV;AAKHW,IAAAA,IAAI,EAAE;AALH,GAvEY;AA8EhBW,EAAAA,EAAE,EAAE;AACHf,IAAAA,KAAK,EAAE,IADJ;AAEHC,IAAAA,KAAK,EAAEL,KAAK,GAAG,IAAH,GAAUH,EAAE,CAAE,kBAAF,CAFrB;AAGHS,IAAAA,OAAO,EAAE,EAHN;AAIHC,IAAAA,SAAS,EAAEV,EAAE,CAAE,kBAAF,CAJV;AAKHW,IAAAA,IAAI,EAAE;AALH,GA9EY;AAqFhBY,EAAAA,EAAE,EAAE;AACHhB,IAAAA,KAAK,EAAE,IADJ;AAEHC,IAAAA,KAAK,EAAEL,KAAK,GAAG,IAAH,GAAUH,EAAE,CAAE,aAAF,CAFrB;AAGHS,IAAAA,OAAO,EAAE,EAHN;AAIHC,IAAAA,SAAS,EAAEV,EAAE,CAAE,aAAF,CAJV;AAKHW,IAAAA,IAAI,EAAE;AALH,GArFY;AA4FhBa,EAAAA,EAAE,EAAE;AACHjB,IAAAA,KAAK,EAAE,IADJ;AAEHC,IAAAA,KAAK,EAAEL,KAAK,GAAG,IAAH,GAAUH,EAAE,CAAE,YAAF,CAFrB;AAGHS,IAAAA,OAAO,EAAE,EAHN;AAIHC,IAAAA,SAAS,EAAEV,EAAE,CAAE,YAAF,CAJV;AAKHW,IAAAA,IAAI,EAAE;AALH,GA5FY;AAmGhBc,EAAAA,EAAE,EAAE;AACHlB,IAAAA,KAAK,EAAE,IADJ;AAEHC,IAAAA,KAAK,EAAEL,KAAK,GAAG,IAAH,GAAUH,EAAE,CAAE,aAAF,CAFrB;AAGHS,IAAAA,OAAO,EAAE,EAHN;AAIHC,IAAAA,SAAS,EAAEV,EAAE,CAAE,aAAF,CAJV;AAKHW,IAAAA,IAAI,EAAE;AALH;AAnGY,CAAjB;AA4GA;AACA;AACA;;AACA,OAAO,MAAMe,aAAa,GAAGC,MAAM,CAACC,MAAP,CAAevB,QAAf,CAAtB;AAEP;AACA;AACA;;AACA,OAAO,MAAMwB,SAAS,GAAG,CACxBxB,QAAQ,CAACC,EADe,EAExBD,QAAQ,CAACO,OAFe,EAGxBP,QAAQ,CAACQ,EAHe,EAIxBR,QAAQ,CAACS,GAJe,EAKxBT,QAAQ,CAACU,EALe,EAMxBV,QAAQ,CAACW,EANe,CAAlB;AASP,OAAO,MAAMc,YAAY,GAAGzB,QAAQ,CAACC,EAA9B;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASyB,cAAT,CAAyBxB,KAAzB,EAAgCyB,IAAhC,EAAsCC,KAAtC,EAA8C;AACpD,QAAMC,YAAY,GAAGF,IAAI,GAAI,GAAGzB,KAAO,GAAGyB,IAAM,EAAvB,GAA2BzB,KAApD;AAEA,SAAO4B,SAAS,CAAED,YAAF,EAAgBD,KAAhB,CAAhB;AACA;AAED;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASG,QAAT,CAAmBH,KAAnB,EAA2B;AACjC,SAAO,CAAElC,OAAO,CAAEkC,KAAF,CAAT,IAAsBA,KAAK,CAACI,MAAN,GAAe,CAArC,IAA0CJ,KAAK,KAAK,KAA3D;AACA;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASE,SAAT,CAAoBD,YAApB,EAAkCD,KAAK,GAAGP,aAA1C,EAA0D;AAChE,QAAMnB,KAAK,GAAG+B,MAAM,CAAEJ,YAAF,CAAN,CAAuBK,IAAvB,EAAd;AAEA,MAAIC,GAAG,GAAGC,UAAU,CAAElC,KAAF,EAAS,EAAT,CAApB;AACAiC,EAAAA,GAAG,GAAGE,KAAK,CAAEF,GAAF,CAAL,GAAe,EAAf,GAAoBA,GAA1B;AAEA,QAAMG,SAAS,GAAGpC,KAAK,CAACqC,KAAN,CAAa,mBAAb,EAAoC,CAApC,CAAlB;AAEA,MAAIZ,IAAI,GAAGW,SAAS,KAAKE,SAAd,GAA0BF,SAA1B,GAAsC,EAAjD;AACAX,EAAAA,IAAI,GAAGA,IAAI,CAACc,WAAL,EAAP;;AAEA,MAAKV,QAAQ,CAAEH,KAAF,CAAb,EAAyB;AACxB,UAAMW,KAAK,GAAGX,KAAK,CAACc,IAAN,CAAcC,IAAF,IAAYA,IAAI,CAACzC,KAAL,KAAeyB,IAAvC,CAAd;AACAA,IAAAA,IAAI,GAAGY,KAAH,aAAGA,KAAH,uBAAGA,KAAK,CAAErC,KAAd;AACA,GAHD,MAGO;AACNyB,IAAAA,IAAI,GAAGF,YAAY,CAACvB,KAApB;AACA;;AAED,SAAO,CAAEiC,GAAF,EAAOR,IAAP,CAAP;AACA;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASiB,kBAAT,CAA6BC,IAA7B,EAAmCjB,KAAnC,EAA0CkB,aAA1C,EAAyDC,YAAzD,EAAwE;AAC9E,QAAM,CAAEC,WAAF,EAAeC,UAAf,IAA8BnB,SAAS,CAAEe,IAAF,EAAQjB,KAAR,CAA7C;AACA,MAAIsB,SAAS,GAAGF,WAAhB;AACA,MAAIG,QAAJ;;AAEA,MAAKd,KAAK,CAAEW,WAAF,CAAL,IAAwBA,WAAW,KAAK,EAA7C,EAAkD;AACjDE,IAAAA,SAAS,GAAGJ,aAAZ;AACA;;AAEDK,EAAAA,QAAQ,GAAGF,UAAU,IAAIF,YAAzB;AAEA;AACD;AACA;AACA;;AACC,MAAKhB,QAAQ,CAAEH,KAAF,CAAR,IAAqB,CAAEuB,QAA5B,EAAuC;AAAA;;AACtCA,IAAAA,QAAQ,cAAGvB,KAAK,CAAE,CAAF,CAAR,4CAAG,QAAY1B,KAAvB;AACA;;AAED,SAAO,CAAEgD,SAAF,EAAaC,QAAb,CAAP;AACA;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,qBAAT,CAAgCzB,IAAhC,EAAuC;AAC7C,QAAMY,KAAK,GAAGlB,aAAa,CAACqB,IAAd,CAAsBC,IAAF,IAAYA,IAAI,CAACzC,KAAL,KAAeyB,IAA/C,CAAd;AACA,SAAOY,KAAK,SAAL,IAAAA,KAAK,WAAL,IAAAA,KAAK,CAAElC,SAAP,GAAmBkC,KAAnB,aAAmBA,KAAnB,uBAAmBA,KAAK,CAAElC,SAA1B,GAAsCkC,KAAtC,aAAsCA,KAAtC,uBAAsCA,KAAK,CAAErC,KAApD;AACA;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASmD,uBAAT,CAAkCC,QAAQ,GAAG,EAA7C,EAAiD1B,KAAK,GAAG,EAAzD,EAA8D;AACpE,SAAOA,KAAK,CAAC2B,MAAN,CAAgB5B,IAAF,IAAY;AAChC,WAAO2B,QAAQ,CAACE,QAAT,CAAmB7B,IAAI,CAACzB,KAAxB,CAAP;AACA,GAFM,CAAP;AAGA;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMuD,cAAc,GAAG,CAAE;AAAE7B,EAAAA,KAAF;AAAS8B,EAAAA,cAAT;AAAyBC,EAAAA;AAAzB,CAAF,KAAgD;AAC7E/B,EAAAA,KAAK,GAAGA,KAAK,IAAIP,aAAjB;AACA,QAAMuC,SAAS,GAAGP,uBAAuB,CACxC,CAAEK,cAAF,GAAmB,EAAnB,GAAwBA,cADgB,EAExC9B,KAFwC,CAAzC;;AAKA,MAAK+B,aAAL,EAAqB;AACpBC,IAAAA,SAAS,CAACC,OAAV,CAAmB,CAAElC,IAAF,EAAQmC,CAAR,KAAe;AACjC,UAAKH,aAAa,CAAEhC,IAAI,CAACzB,KAAP,CAAlB,EAAmC;AAClC0D,QAAAA,SAAS,CAAEE,CAAF,CAAT,CAAe1D,OAAf,GAAyBuD,aAAa,CAAEhC,IAAI,CAACzB,KAAP,CAAtC;AACA;AACD,KAJD;AAKA;;AAED,SAAO0D,SAAS,CAAC5B,MAAV,KAAqB,CAArB,GAAyB,KAAzB,GAAiC4B,SAAxC;AACA,CAhBM","sourcesContent":["/**\n * External dependencies\n */\nimport { isEmpty } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x } from '@wordpress/i18n';\nimport { Platform } from '@wordpress/element';\n\nconst isWeb = Platform.OS === 'web';\n\nconst allUnits = {\n\tpx: {\n\t\tvalue: 'px',\n\t\tlabel: isWeb ? 'px' : __( 'Pixels (px)' ),\n\t\tdefault: '',\n\t\ta11yLabel: __( 'Pixels (px)' ),\n\t\tstep: 1,\n\t},\n\tpercent: {\n\t\tvalue: '%',\n\t\tlabel: isWeb ? '%' : __( 'Percentage (%)' ),\n\t\tdefault: '',\n\t\ta11yLabel: __( 'Percent (%)' ),\n\t\tstep: 0.1,\n\t},\n\tem: {\n\t\tvalue: 'em',\n\t\tlabel: isWeb ? 'em' : __( 'Relative to parent font size (em)' ),\n\t\tdefault: '',\n\t\ta11yLabel: _x( 'ems', 'Relative to parent font size (em)' ),\n\t\tstep: 0.01,\n\t},\n\trem: {\n\t\tvalue: 'rem',\n\t\tlabel: isWeb ? 'rem' : __( 'Relative to root font size (rem)' ),\n\t\tdefault: '',\n\t\ta11yLabel: _x( 'rems', 'Relative to root font size (rem)' ),\n\t\tstep: 0.01,\n\t},\n\tvw: {\n\t\tvalue: 'vw',\n\t\tlabel: isWeb ? 'vw' : __( 'Viewport width (vw)' ),\n\t\tdefault: '',\n\t\ta11yLabel: __( 'Viewport width (vw)' ),\n\t\tstep: 0.1,\n\t},\n\tvh: {\n\t\tvalue: 'vh',\n\t\tlabel: isWeb ? 'vh' : __( 'Viewport height (vh)' ),\n\t\tdefault: '',\n\t\ta11yLabel: __( 'Viewport height (vh)' ),\n\t\tstep: 0.1,\n\t},\n\tvmin: {\n\t\tvalue: 'vmin',\n\t\tlabel: isWeb ? 'vmin' : __( 'Viewport smallest dimension (vmin)' ),\n\t\tdefault: '',\n\t\ta11yLabel: __( 'Viewport smallest dimension (vmin)' ),\n\t\tstep: 0.1,\n\t},\n\tvmax: {\n\t\tvalue: 'vmax',\n\t\tlabel: isWeb ? 'vmax' : __( 'Viewport largest dimension (vmax)' ),\n\t\tdefault: '',\n\t\ta11yLabel: __( 'Viewport largest dimension (vmax)' ),\n\t\tstep: 0.1,\n\t},\n\tch: {\n\t\tvalue: 'ch',\n\t\tlabel: isWeb ? 'ch' : __( 'Width of the zero (0) character (ch)' ),\n\t\tdefault: '',\n\t\ta11yLabel: __( 'Width of the zero (0) character (ch)' ),\n\t\tstep: 0.01,\n\t},\n\tex: {\n\t\tvalue: 'ex',\n\t\tlabel: isWeb ? 'ex' : __( 'x-height of the font (ex)' ),\n\t\tdefault: '',\n\t\ta11yLabel: __( 'x-height of the font (ex)' ),\n\t\tstep: 0.01,\n\t},\n\tcm: {\n\t\tvalue: 'cm',\n\t\tlabel: isWeb ? 'cm' : __( 'Centimeters (cm)' ),\n\t\tdefault: '',\n\t\ta11yLabel: __( 'Centimeters (cm)' ),\n\t\tstep: 0.001,\n\t},\n\tmm: {\n\t\tvalue: 'mm',\n\t\tlabel: isWeb ? 'mm' : __( 'Millimeters (mm)' ),\n\t\tdefault: '',\n\t\ta11yLabel: __( 'Millimeters (mm)' ),\n\t\tstep: 0.1,\n\t},\n\tin: {\n\t\tvalue: 'in',\n\t\tlabel: isWeb ? 'in' : __( 'Inches (in)' ),\n\t\tdefault: '',\n\t\ta11yLabel: __( 'Inches (in)' ),\n\t\tstep: 0.001,\n\t},\n\tpc: {\n\t\tvalue: 'pc',\n\t\tlabel: isWeb ? 'pc' : __( 'Picas (pc)' ),\n\t\tdefault: '',\n\t\ta11yLabel: __( 'Picas (pc)' ),\n\t\tstep: 1,\n\t},\n\tpt: {\n\t\tvalue: 'pt',\n\t\tlabel: isWeb ? 'pt' : __( 'Points (pt)' ),\n\t\tdefault: '',\n\t\ta11yLabel: __( 'Points (pt)' ),\n\t\tstep: 1,\n\t},\n};\n\n/**\n * An array of all available CSS length units.\n */\nexport const ALL_CSS_UNITS = Object.values( allUnits );\n\n/**\n * Units of measurements. `a11yLabel` is used by screenreaders.\n */\nexport const CSS_UNITS = [\n\tallUnits.px,\n\tallUnits.percent,\n\tallUnits.em,\n\tallUnits.rem,\n\tallUnits.vw,\n\tallUnits.vh,\n];\n\nexport const DEFAULT_UNIT = allUnits.px;\n\n/**\n * Handles legacy value + unit handling.\n * This component use to manage both incoming value and units separately.\n *\n * Moving forward, ideally the value should be a string that contains both\n * the value and unit, example: '10px'\n *\n * @param {number|string} value Value\n * @param {string}        unit  Unit value\n * @param {Array<Object>} units Units to derive from.\n * @return {Array<number, string>} The extracted number and unit.\n */\nexport function getParsedValue( value, unit, units ) {\n\tconst initialValue = unit ? `${ value }${ unit }` : value;\n\n\treturn parseUnit( initialValue, units );\n}\n\n/**\n * Checks if units are defined.\n *\n * @param {any} units Units to check.\n * @return {boolean} Whether units are defined.\n */\nexport function hasUnits( units ) {\n\treturn ! isEmpty( units ) && units.length > 1 && units !== false;\n}\n\n/**\n * Parses a number and unit from a value.\n *\n * @param {string}        initialValue Value to parse\n * @param {Array<Object>} units        Units to derive from.\n * @return {Array<number, string>} The extracted number and unit.\n */\nexport function parseUnit( initialValue, units = ALL_CSS_UNITS ) {\n\tconst value = String( initialValue ).trim();\n\n\tlet num = parseFloat( value, 10 );\n\tnum = isNaN( num ) ? '' : num;\n\n\tconst unitMatch = value.match( /[\\d.\\-\\+]*\\s*(.*)/ )[ 1 ];\n\n\tlet unit = unitMatch !== undefined ? unitMatch : '';\n\tunit = unit.toLowerCase();\n\n\tif ( hasUnits( units ) ) {\n\t\tconst match = units.find( ( item ) => item.value === unit );\n\t\tunit = match?.value;\n\t} else {\n\t\tunit = DEFAULT_UNIT.value;\n\t}\n\n\treturn [ num, unit ];\n}\n\n/**\n * Parses a number and unit from a value. Validates parsed value, using fallback\n * value if invalid.\n *\n * @param {number|string} next          The next value.\n * @param {Array<Object>} units         Units to derive from.\n * @param {number|string} fallbackValue The fallback value.\n * @param {string}        fallbackUnit  The fallback value.\n * @return {Array<number, string>} The extracted number and unit.\n */\nexport function getValidParsedUnit( next, units, fallbackValue, fallbackUnit ) {\n\tconst [ parsedValue, parsedUnit ] = parseUnit( next, units );\n\tlet baseValue = parsedValue;\n\tlet baseUnit;\n\n\tif ( isNaN( parsedValue ) || parsedValue === '' ) {\n\t\tbaseValue = fallbackValue;\n\t}\n\n\tbaseUnit = parsedUnit || fallbackUnit;\n\n\t/**\n\t * If no unit is found, attempt to use the first value from the collection\n\t * of units as a default fallback.\n\t */\n\tif ( hasUnits( units ) && ! baseUnit ) {\n\t\tbaseUnit = units[ 0 ]?.value;\n\t}\n\n\treturn [ baseValue, baseUnit ];\n}\n\n/**\n * Takes a unit value and finds the matching accessibility label for the\n * unit abbreviation.\n *\n * @param {string} unit Unit value (example: px)\n * @return {string} a11y label for the unit abbreviation\n */\nexport function parseA11yLabelForUnit( unit ) {\n\tconst match = ALL_CSS_UNITS.find( ( item ) => item.value === unit );\n\treturn match?.a11yLabel ? match?.a11yLabel : match?.value;\n}\n\n/**\n * Filters available units based on values defined by settings.\n *\n * @param {Array} settings Collection of preferred units.\n * @param {Array} units    Collection of available units.\n *\n * @return {Array} Filtered units based on settings.\n */\nexport function filterUnitsWithSettings( settings = [], units = [] ) {\n\treturn units.filter( ( unit ) => {\n\t\treturn settings.includes( unit.value );\n\t} );\n}\n\n/**\n * Custom hook to retrieve and consolidate units setting from add_theme_support().\n * TODO: ideally this hook shouldn't be needed\n * https://github.com/WordPress/gutenberg/pull/31822#discussion_r633280823\n *\n * @param {Object} args                                  An object containing units, settingPath & defaultUnits.\n * @param {Array<Object>|undefined} args.units           Collection of available units.\n * @param {Array<string>|undefined} args.availableUnits  The setting path. Defaults to 'spacing.units'.\n * @param {Object|undefined}        args.defaultValues   Collection of default values for defined units. Example: { px: '350', em: '15' }.\n *\n * @return {Array|boolean} Filtered units based on settings.\n */\nexport const useCustomUnits = ( { units, availableUnits, defaultValues } ) => {\n\tunits = units || ALL_CSS_UNITS;\n\tconst usedUnits = filterUnitsWithSettings(\n\t\t! availableUnits ? [] : availableUnits,\n\t\tunits\n\t);\n\n\tif ( defaultValues ) {\n\t\tusedUnits.forEach( ( unit, i ) => {\n\t\t\tif ( defaultValues[ unit.value ] ) {\n\t\t\t\tusedUnits[ i ].default = defaultValues[ unit.value ];\n\t\t\t}\n\t\t} );\n\t}\n\n\treturn usedUnits.length === 0 ? false : usedUnits;\n};\n"]}