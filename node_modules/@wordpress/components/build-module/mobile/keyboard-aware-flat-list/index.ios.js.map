{"version":3,"sources":["@wordpress/components/src/mobile/keyboard-aware-flat-list/index.ios.js"],"names":["KeyboardAwareScrollView","FlatList","isEqual","memo","List","KeyboardAwareFlatList","extraScrollHeight","shouldPreventAutomaticScroll","innerRef","autoScroll","scrollViewStyle","inputAccessoryViewHeight","listProps","flex","undefined","ref","scrollViewRef","keyboardWillShowIndicator","setTimeout","latestContentOffsetY","scrollToPosition","scrollEnabled","event","nativeEvent","contentOffset","y","handleCaretVerticalPositionChange","scrollView","targetId","caretY","previousCaretY","refreshScrollForField"],"mappings":";;AAAA;AACA;AACA;AACA,SAASA,uBAAT,QAAwC,yCAAxC;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SAASC,OAAT,QAAwB,QAAxB;AAEA;AACA;AACA;;AACA,SAASC,IAAT,QAAqB,oBAArB;AAEA,MAAMC,IAAI,GAAGD,IAAI,CAAEF,QAAF,EAAYC,OAAZ,CAAjB;AAEA,OAAO,MAAMG,qBAAqB,GAAG,CAAE;AACtCC,EAAAA,iBADsC;AAEtCC,EAAAA,4BAFsC;AAGtCC,EAAAA,QAHsC;AAItCC,EAAAA,UAJsC;AAKtCC,EAAAA,eALsC;AAMtCC,EAAAA,wBANsC;AAOtC,KAAGC;AAPmC,CAAF,KASpC,cAAC,uBAAD;AACC,EAAA,KAAK,EAAG,CAAE;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAAF,EAAeH,eAAf,CADT;AAEC,EAAA,mBAAmB,EAAC,MAFrB;AAGC,EAAA,yBAAyB,EAAG,KAH7B;AAIC,EAAA,yBAAyB,EAAC,SAJ3B;AAKC,EAAA,iBAAiB,EAAGJ,iBALrB;AAMC,EAAA,WAAW,EAAG,CANf;AAOC,EAAA,wBAAwB,EAAGK,wBAP5B;AAQC,EAAA,qBAAqB,EAAGF,UAAU,KAAKK,SAAf,GAA2B,KAA3B,GAAmCL,UAR5D;AASC,EAAA,GAAG,EAAKM,GAAF,IAAW;AAChB,SAAKC,aAAL,GAAqBD,GAArB;AACAP,IAAAA,QAAQ,CAAEO,GAAF,CAAR;AACA,GAZF;AAaC,EAAA,kBAAkB,EAAG,MAAM;AAC1B,SAAKE,yBAAL,GAAiC,KAAjC;AACA,GAfF;AAgBC,EAAA,iBAAiB,EAAG,MAAM;AACzBC,IAAAA,UAAU,CAAE,MAAM;AACjB,UACC,CAAE,KAAKD,yBAAP,IACA,KAAKE,oBAAL,KAA8BL,SAD9B,IAEA,CAAEP,4BAA4B,EAH/B,EAIE;AACD;AACA,YAAK,KAAKS,aAAV,EAA0B;AACzB,eAAKA,aAAL,CAAmBI,gBAAnB,CACC,CADD,EAEC,KAAKD,oBAFN,EAGC,IAHD;AAKA;AACD;AACD,KAfS,EAeP,EAfO,CAAV;AAgBA,GAjCF;AAkCC,EAAA,kBAAkB,EAAG,MAAM;AAC1B,SAAKF,yBAAL,GAAiC,IAAjC;AACA,GApCF;AAqCC,EAAA,aAAa,EAAGL,SAAS,CAACS,aArC3B;AAsCC,EAAA,QAAQ,EAAKC,KAAF,IAAa;AACvB,SAAKH,oBAAL,GAA4BG,KAAK,CAACC,WAAN,CAAkBC,aAAlB,CAAgCC,CAA5D;AACA;AAxCF,GA0CC,cAAC,IAAD,EAAWb,SAAX,CA1CD,CATM;;AAuDPP,qBAAqB,CAACqB,iCAAtB,GAA0D,CACzDC,UADyD,EAEzDC,QAFyD,EAGzDC,MAHyD,EAIzDC,cAJyD,KAKrD;AACJ,MAAKA,cAAL,EAAsB;AACrB;AACAH,IAAAA,UAAU,CAACI,qBAAX,CAAkCH,QAAlC;AACA;AACD,CAVD;;AAYA,eAAevB,qBAAf","sourcesContent":["/**\n * External dependencies\n */\nimport { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scroll-view';\nimport { FlatList } from 'react-native';\nimport { isEqual } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { memo } from '@wordpress/element';\n\nconst List = memo( FlatList, isEqual );\n\nexport const KeyboardAwareFlatList = ( {\n\textraScrollHeight,\n\tshouldPreventAutomaticScroll,\n\tinnerRef,\n\tautoScroll,\n\tscrollViewStyle,\n\tinputAccessoryViewHeight,\n\t...listProps\n} ) => (\n\t<KeyboardAwareScrollView\n\t\tstyle={ [ { flex: 1 }, scrollViewStyle ] }\n\t\tkeyboardDismissMode=\"none\"\n\t\tenableResetScrollToCoords={ false }\n\t\tkeyboardShouldPersistTaps=\"handled\"\n\t\textraScrollHeight={ extraScrollHeight }\n\t\textraHeight={ 0 }\n\t\tinputAccessoryViewHeight={ inputAccessoryViewHeight }\n\t\tenableAutomaticScroll={ autoScroll === undefined ? false : autoScroll }\n\t\tref={ ( ref ) => {\n\t\t\tthis.scrollViewRef = ref;\n\t\t\tinnerRef( ref );\n\t\t} }\n\t\tonKeyboardWillHide={ () => {\n\t\t\tthis.keyboardWillShowIndicator = false;\n\t\t} }\n\t\tonKeyboardDidHide={ () => {\n\t\t\tsetTimeout( () => {\n\t\t\t\tif (\n\t\t\t\t\t! this.keyboardWillShowIndicator &&\n\t\t\t\t\tthis.latestContentOffsetY !== undefined &&\n\t\t\t\t\t! shouldPreventAutomaticScroll()\n\t\t\t\t) {\n\t\t\t\t\t// Reset the content position if keyboard is still closed\n\t\t\t\t\tif ( this.scrollViewRef ) {\n\t\t\t\t\t\tthis.scrollViewRef.scrollToPosition(\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\tthis.latestContentOffsetY,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 50 );\n\t\t} }\n\t\tonKeyboardWillShow={ () => {\n\t\t\tthis.keyboardWillShowIndicator = true;\n\t\t} }\n\t\tscrollEnabled={ listProps.scrollEnabled }\n\t\tonScroll={ ( event ) => {\n\t\t\tthis.latestContentOffsetY = event.nativeEvent.contentOffset.y;\n\t\t} }\n\t>\n\t\t<List { ...listProps } />\n\t</KeyboardAwareScrollView>\n);\n\nKeyboardAwareFlatList.handleCaretVerticalPositionChange = (\n\tscrollView,\n\ttargetId,\n\tcaretY,\n\tpreviousCaretY\n) => {\n\tif ( previousCaretY ) {\n\t\t//if this is not the first tap\n\t\tscrollView.refreshScrollForField( targetId );\n\t}\n};\n\nexport default KeyboardAwareFlatList;\n"]}