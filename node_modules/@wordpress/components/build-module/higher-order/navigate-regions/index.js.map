{"version":3,"sources":["@wordpress/components/src/higher-order/navigate-regions/index.js"],"names":["useCallback","useState","useRef","useEffect","createHigherOrderComponent","useKeyboardShortcut","rawShortcut","defaultShortcuts","previous","access","next","useNavigateRegions","ref","shortcuts","isFocusingRegions","setIsFocusingRegions","focusRegion","offset","regions","Array","from","current","querySelectorAll","length","nextRegion","selectedIndex","indexOf","ownerDocument","activeElement","nextIndex","focus","focusPrevious","focusNext","bindGlobal","onClick","addEventListener","removeEventListener","Component","props","className"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useCallback, useState, useRef, useEffect } from '@wordpress/element';\nimport {\n\tcreateHigherOrderComponent,\n\tuseKeyboardShortcut,\n} from '@wordpress/compose';\nimport { rawShortcut } from '@wordpress/keycodes';\n\nconst defaultShortcuts = {\n\tprevious: [ 'ctrl+shift+`', rawShortcut.access( 'p' ) ],\n\tnext: [ 'ctrl+`', rawShortcut.access( 'n' ) ],\n};\n\nexport function useNavigateRegions( ref, shortcuts = defaultShortcuts ) {\n\tconst [ isFocusingRegions, setIsFocusingRegions ] = useState( false );\n\n\tfunction focusRegion( offset ) {\n\t\tconst regions = Array.from(\n\t\t\tref.current.querySelectorAll( '[role=\"region\"]' )\n\t\t);\n\t\tif ( ! regions.length ) {\n\t\t\treturn;\n\t\t}\n\t\tlet nextRegion = regions[ 0 ];\n\t\tconst selectedIndex = regions.indexOf(\n\t\t\tref.current.ownerDocument.activeElement\n\t\t);\n\t\tif ( selectedIndex !== -1 ) {\n\t\t\tlet nextIndex = selectedIndex + offset;\n\t\t\tnextIndex = nextIndex === -1 ? regions.length - 1 : nextIndex;\n\t\t\tnextIndex = nextIndex === regions.length ? 0 : nextIndex;\n\t\t\tnextRegion = regions[ nextIndex ];\n\t\t}\n\n\t\tnextRegion.focus();\n\t\tsetIsFocusingRegions( true );\n\t}\n\tconst focusPrevious = useCallback( () => focusRegion( -1 ), [] );\n\tconst focusNext = useCallback( () => focusRegion( 1 ), [] );\n\n\tuseKeyboardShortcut( shortcuts.previous, focusPrevious, {\n\t\tbindGlobal: true,\n\t} );\n\tuseKeyboardShortcut( shortcuts.next, focusNext, { bindGlobal: true } );\n\n\tuseEffect( () => {\n\t\tfunction onClick() {\n\t\t\tsetIsFocusingRegions( false );\n\t\t}\n\n\t\tref.current.addEventListener( 'click', onClick );\n\n\t\treturn () => {\n\t\t\tref.current?.removeEventListener( 'click', onClick );\n\t\t};\n\t}, [ setIsFocusingRegions ] );\n\n\tif ( ! isFocusingRegions ) {\n\t\treturn;\n\t}\n\n\treturn 'is-focusing-regions';\n}\n\nexport default createHigherOrderComponent(\n\t( Component ) => ( { shortcuts, ...props } ) => {\n\t\tconst ref = useRef();\n\t\tconst className = useNavigateRegions( ref, shortcuts );\n\t\treturn (\n\t\t\t<div ref={ ref } className={ className }>\n\t\t\t\t<Component { ...props } />\n\t\t\t</div>\n\t\t);\n\t},\n\t'navigateRegions'\n);\n"]}