{"version":3,"sources":["@wordpress/components/src/higher-order/with-notices/index.js"],"names":["v4","uuid","forwardRef","useState","useMemo","createHigherOrderComponent","NoticeList","OriginalComponent","Component","props","ref","noticeList","setNoticeList","noticeOperations","createNotice","notice","noticeToAdd","id","current","createErrorNotice","msg","status","content","removeNotice","filter","removeAllNotices","propsOut","noticeUI","length","isForwardRef","render"],"mappings":";;;AAAA;AACA;AACA;AACA,SAASA,EAAE,IAAIC,IAAf,QAA2B,MAA3B;AAEA;AACA;AACA;;AACA,SAASC,UAAT,EAAqBC,QAArB,EAA+BC,OAA/B,QAA8C,oBAA9C;AACA,SAASC,0BAAT,QAA2C,oBAA3C;AAEA;AACA;AACA;;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAeD,0BAA0B,CAAIE,iBAAF,IAAyB;AACnE,WAASC,SAAT,CAAoBC,KAApB,EAA2BC,GAA3B,EAAiC;AAChC,UAAM,CAAEC,UAAF,EAAcC,aAAd,IAAgCT,QAAQ,CAAE,EAAF,CAA9C;AAEA,UAAMU,gBAAgB,GAAGT,OAAO,CAAE,MAAM;AACvC;AACH;AACA;AACA;AACA;AACG,YAAMU,YAAY,GAAKC,MAAF,IAAc;AAClC,cAAMC,WAAW,GAAGD,MAAM,CAACE,EAAP,GACjBF,MADiB,GAEjB,EAAE,GAAGA,MAAL;AAAaE,UAAAA,EAAE,EAAEhB,IAAI;AAArB,SAFH;AAGAW,QAAAA,aAAa,CAAIM,OAAF,IAAe,CAAE,GAAGA,OAAL,EAAcF,WAAd,CAAjB,CAAb;AACA,OALD;;AAOA,aAAO;AACNF,QAAAA,YADM;;AAGN;AACJ;AACA;AACA;AACA;AACIK,QAAAA,iBAAiB,EAAIC,GAAF,IAAW;AAC7BN,UAAAA,YAAY,CAAE;AACbO,YAAAA,MAAM,EAAE,OADK;AAEbC,YAAAA,OAAO,EAAEF;AAFI,WAAF,CAAZ;AAIA,SAbK;;AAeN;AACJ;AACA;AACA;AACA;AACIG,QAAAA,YAAY,EAAIN,EAAF,IAAU;AACvBL,UAAAA,aAAa,CAAIM,OAAF,IACdA,OAAO,CAACM,MAAR,CAAkBT,MAAF,IAAcA,MAAM,CAACE,EAAP,KAAcA,EAA5C,CADY,CAAb;AAGA,SAxBK;;AA0BN;AACJ;AACA;AACIQ,QAAAA,gBAAgB,EAAE,MAAM;AACvBb,UAAAA,aAAa,CAAE,EAAF,CAAb;AACA;AA/BK,OAAP;AAiCA,KA9C+B,EA8C7B,EA9C6B,CAAhC;AAgDA,UAAMc,QAAQ,GAAG,EAChB,GAAGjB,KADa;AAEhBE,MAAAA,UAFgB;AAGhBE,MAAAA,gBAHgB;AAIhBc,MAAAA,QAAQ,EAAEhB,UAAU,CAACiB,MAAX,GAAoB,CAApB,IACT,cAAC,UAAD;AACC,QAAA,SAAS,EAAC,4BADX;AAEC,QAAA,OAAO,EAAGjB,UAFX;AAGC,QAAA,QAAQ,EAAGE,gBAAgB,CAACU;AAH7B;AALe,KAAjB;AAaA,WAAOM,YAAY,GAClB,cAAC,iBAAD,eAAwBH,QAAxB;AAAmC,MAAA,GAAG,EAAGhB;AAAzC,OADkB,GAGlB,cAAC,iBAAD,EAAwBgB,QAAxB,CAHD;AAKA;;AAED,MAAIG,YAAJ;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAavB,iBAAnB,CAzEmE,CA0EnE;;AACA,MAAK,OAAOuB,MAAP,KAAkB,UAAvB,EAAoC;AACnCD,IAAAA,YAAY,GAAG,IAAf;AACA,WAAO3B,UAAU,CAAEM,SAAF,CAAjB;AACA;;AACD,SAAOA,SAAP;AACA,CAhFwC,CAAzC","sourcesContent":["/**\n * External dependencies\n */\nimport { v4 as uuid } from 'uuid';\n\n/**\n * WordPress dependencies\n */\nimport { forwardRef, useState, useMemo } from '@wordpress/element';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport NoticeList from '../../notice/list';\n\n/**\n * Override the default edit UI to include notices if supported.\n *\n * @param {WPComponent} OriginalComponent Original component.\n *\n * @return {WPComponent} Wrapped component.\n */\nexport default createHigherOrderComponent( ( OriginalComponent ) => {\n\tfunction Component( props, ref ) {\n\t\tconst [ noticeList, setNoticeList ] = useState( [] );\n\n\t\tconst noticeOperations = useMemo( () => {\n\t\t\t/**\n\t\t\t * Function passed down as a prop that adds a new notice.\n\t\t\t *\n\t\t\t * @param {Object} notice Notice to add.\n\t\t\t */\n\t\t\tconst createNotice = ( notice ) => {\n\t\t\t\tconst noticeToAdd = notice.id\n\t\t\t\t\t? notice\n\t\t\t\t\t: { ...notice, id: uuid() };\n\t\t\t\tsetNoticeList( ( current ) => [ ...current, noticeToAdd ] );\n\t\t\t};\n\n\t\t\treturn {\n\t\t\t\tcreateNotice,\n\n\t\t\t\t/**\n\t\t\t\t * Function passed as a prop that adds a new error notice.\n\t\t\t\t *\n\t\t\t\t * @param {string} msg Error message of the notice.\n\t\t\t\t */\n\t\t\t\tcreateErrorNotice: ( msg ) => {\n\t\t\t\t\tcreateNotice( {\n\t\t\t\t\t\tstatus: 'error',\n\t\t\t\t\t\tcontent: msg,\n\t\t\t\t\t} );\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t * Removes a notice by id.\n\t\t\t\t *\n\t\t\t\t * @param {string} id Id of the notice to remove.\n\t\t\t\t */\n\t\t\t\tremoveNotice: ( id ) => {\n\t\t\t\t\tsetNoticeList( ( current ) =>\n\t\t\t\t\t\tcurrent.filter( ( notice ) => notice.id !== id )\n\t\t\t\t\t);\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t * Removes all notices\n\t\t\t\t */\n\t\t\t\tremoveAllNotices: () => {\n\t\t\t\t\tsetNoticeList( [] );\n\t\t\t\t},\n\t\t\t};\n\t\t}, [] );\n\n\t\tconst propsOut = {\n\t\t\t...props,\n\t\t\tnoticeList,\n\t\t\tnoticeOperations,\n\t\t\tnoticeUI: noticeList.length > 0 && (\n\t\t\t\t<NoticeList\n\t\t\t\t\tclassName=\"components-with-notices-ui\"\n\t\t\t\t\tnotices={ noticeList }\n\t\t\t\t\tonRemove={ noticeOperations.removeNotice }\n\t\t\t\t/>\n\t\t\t),\n\t\t};\n\n\t\treturn isForwardRef ? (\n\t\t\t<OriginalComponent { ...propsOut } ref={ ref } />\n\t\t) : (\n\t\t\t<OriginalComponent { ...propsOut } />\n\t\t);\n\t}\n\n\tlet isForwardRef;\n\tconst { render } = OriginalComponent;\n\t// Returns a forwardRef if OriginalComponent appears to be a forwardRef\n\tif ( typeof render === 'function' ) {\n\t\tisForwardRef = true;\n\t\treturn forwardRef( Component );\n\t}\n\treturn Component;\n} );\n"]}