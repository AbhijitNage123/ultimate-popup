{"version":3,"sources":["@wordpress/a11y/src/filter-message.js"],"names":["previousMessage","filterMessage","message","replace"],"mappings":";;;;;;AAAA,IAAIA,eAAe,GAAG,EAAtB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACe,SAASC,aAAT,CAAwBC,OAAxB,EAAkC;AAChD;AACD;AACA;AACA;AACA;AACA;AACA;AACCA,EAAAA,OAAO,GAAGA,OAAO,CAACC,OAAR,CAAiB,WAAjB,EAA8B,GAA9B,CAAV;AAEA;AACD;AACA;AACA;;AACC,MAAKH,eAAe,KAAKE,OAAzB,EAAmC;AAClCA,IAAAA,OAAO,IAAI,QAAX;AACA;;AAEDF,EAAAA,eAAe,GAAGE,OAAlB;AAEA,SAAOA,OAAP;AACA","sourcesContent":["let previousMessage = '';\n\n/**\n * Filter the message to be announced to the screenreader.\n *\n * @param {string} message The message to be announced.\n *\n * @return {string} The filtered message.\n */\nexport default function filterMessage( message ) {\n\t/*\n\t * Strip HTML tags (if any) from the message string. Ideally, messages should\n\t * be simple strings, carefully crafted for specific use with A11ySpeak.\n\t * When re-using already existing strings this will ensure simple HTML to be\n\t * stripped out and replaced with a space. Browsers will collapse multiple\n\t * spaces natively.\n\t */\n\tmessage = message.replace( /<[^<>]+>/g, ' ' );\n\n\t/*\n\t * Safari + VoiceOver don't announce repeated, identical strings. We use\n\t * a `no-break space` to force them to think identical strings are different.\n\t */\n\tif ( previousMessage === message ) {\n\t\tmessage += '\\u00A0';\n\t}\n\n\tpreviousMessage = message;\n\n\treturn message;\n}\n"]}